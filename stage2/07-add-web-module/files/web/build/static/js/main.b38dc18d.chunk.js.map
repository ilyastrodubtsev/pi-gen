{"version":3,"sources":["../../../../build new pr/robot-wizard/web/src/serviceWorker.js","../../../../build new pr/robot-wizard/web/src/ConnectWizard.js","../../../../build new pr/robot-wizard/web/src/Button.js","../../../../build new pr/robot-wizard/web/src/MicButton.js","../../../../build new pr/robot-wizard/web/src/FullscreenButton.js","../../../../build new pr/robot-wizard/web/src/ZoomButton.js","../../../../build new pr/robot-wizard/web/src/SettingsButton.js","../../../../build new pr/robot-wizard/web/src/JoystickBase.js","../../../../build new pr/robot-wizard/web/src/Joystick.js","../../../../build new pr/robot-wizard/web/src/Video.js","../../../../build new pr/robot-wizard/web/src/Dialog.js","../../../../build new pr/robot-wizard/web/src/Status.js","../../../../build new pr/robot-wizard/web/src/Spinner.js","../../../../build new pr/robot-wizard/web/src/DriveWindow.js","../../../../build new pr/robot-wizard/web/src/App.js","../../../../build new pr/robot-wizard/web/src/index.js"],"names":["Boolean","window","location","hostname","match","ListItem","state","active","a","React","createRef","onClick","e","_this","props","Object","assertThisInitialized","react_default","createElement","href","ref","this","className","cn","bind","text","index_es","icon","locked","faLock","faUnlock","faSignal","bars","b","setState","current","scrollIntoView","Component","defaultProps","List","compact","items","selected","onItemClick","el","_this2","console","log","currentTarget","activate","onSelect","fetch","r","body","getReader","read","d","v","TextDecoder","decode","value","networks","JSON","parse","Map","items_list","n","has","ssid","set","security","Math","ceil","strength","_iterator2","Symbol","iterator","_iteratorNormalCompletion2","_step2","next","done","kv","_kv","slicedToArray","k","push","objectSpread","fetchNetworks","scroll","_this3","map","i","ConnectWizard_ListItem","key","WifiWizard","defaultState","list","passwordField","passwordDiv","wrapper","_this4","showPasswordField","selectedNeedsPassword","valid","headerText","setTimeout","select","onBack","reset","onPasswordChange","target","length","password","onSubimt","preventDefault","onSubmit","selectedName","mylist-compact","style","width","faWifi","ConnectWizard_List","Collapse","in","type","placeholder","onChange","es_Button","variant","disabled","Success","role","Start","size","onDrive","ConnectWizard","successVisible","successCollapsed","wifiWizardVisible","wifiWizardCollapsed","startVisible","startCollapsed","onWifiSubmit","name","passphrase","stringify","method","then","_this5","onWifiBack","onWifiWizardHidden","onStartSubmit","onStartHidden","Fragment","Fade","appear","onExited","ConnectWizard_Start","ConnectWizard_Success","ConnectWizard_WifiWizard","requestAnimationFrame","_callee2","regenerator_default","wrap","_context2","prev","abrupt","Promise","resolve","stop","MOBILE","Button","animationName","onTouchStart","_callee","_context","setStateAsync","onTouchEnd","embed","canTouch","_ref2","id","concat","buttonStyle","faCoffee","MicButton","faMicrophoneAlt","muted","buttonClick","onMute","Button_Button","top","left","faMicrophoneAltSlash","isFullscreen","document","webkitFullscreenElement","mozFullScreenElement","FullscreenButton","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","faExpand","onFullscreen","fs","faCompress","documentElement","mozRequestFullScreen","webkitRequestFullScreen","webkitCancelFullScreen","mozCancelFullScreen","fullscreen","addEventListener","ZoomButton","height","fontSize","PlusButton","ZoomButton_ZoomButton","faPlus","MinusButton","faMinus","SettingsDropdown","dd","show","fit_mode","quality","settingsChanged","_e$target","defineProperty","Dropdown","drop","position","Toggle","as","faCog","Menu","Form","Group","Label","Control","R","initialTransform","directions","0","1","2","3","Joystick","wrapperRef","innerRef","outerRef","outerPressed","innerTransform","onMouseDown","onOuterDown","onWrapperMove","onOuterTouch","touches","targetTouches","onWrapperUp","onEnd","ev","nativeEvent","x","pageX","y","pageY","radiusY","move","onWrapperOut","nx","ny","getBoundingClientRect","dx","dy","outerCenter","innerCenter","distance","sqrt","pow","acos","ddd","PI","cos","sin","dir","floor","error","onMove","onMouseMove","onMouseUp","onMouseLeave","onTouchMove","visibility","cursor","transform","smoothK","CameraJoystick","_Component","_getPrototypeOf2","_len","arguments","args","Array","_key","apply","angle","force","tm","f","plains","right","down","up","_plains$d","clearInterval","inherits","createClass","JoystickBase_Joystick","EngineJoystick","_Component2","_getPrototypeOf3","_len2","_key2","step_left","step_right","smoothA","smoothAngle","expm1","RESIZE_TIMEOUT","DW","DH","MAXW","MAXH","MINW","MINH","KEYS","KeyA","KeyD","KeyS","KeyW","QUALITY","quality_low","quality_med","quality_hi","Video","fit_width","fit_height","haveAudio","undefined","fitMode","resizeTm","scale","tX","tY","X","Y","video","touchDown","stopPropagation","touchMove","buttons","debug","rect","W","clientWidth","H","clientHeight","maxX","maxY","setTransform","playing","mute","onStarted","resize","paused","time","onTime","currentTime","w","h","round","dh","abs","dw","W1","H1","fit","W2","H2","newW","newH","zoom","clearTimeout","onResize","onKeyDown","code","onCameraMove","connectWebRTC","prevProps","config","janus","deps","Janus","useDefaultDependencies","adapter","init","dependencies","callback","showErrorAndReload","onError","destroy","isWebrtcSupported","me","reject","server","success","destroyed","opaqueId","randomString","attach","plugin","onmessage","msg","jsep","result","status","played","streaming","createAnswer","media","audioSend","videoSend","send","message","request","onremotestream","stream","vid","attachMediaStream","oncleanup","slowLink","u","warn","navigator","mediaDevices","enumerateDevices","devices","_iterator","_iteratorNormalCompletion","_step","kind","tr","z","muteAudio","unmuteAudio","parseInt","getBitrate","videoWidth","videoHeight","webRTCAdapter","browserDetails","browser","autoPlay","playsInline","loop","onPlaying","onTimeUpdate","RetryReload","header","handleClose","onClose","_show","asyncToGenerator","mark","_x","Modal","onHide","dialogClassName","Header","closeButton","faExclamationTriangle","Title","Body","Footer","Status","info","extra","Spinner","hidden","CAMERA_MOVE_STEP","DriveWindow","joystickConnected","plusDisabled","minusDisabled","statusText","loading","haveSound","reconnectTimeout","ws","modal","plus","minus","spinner","onJoystickMove","sendCommand","cmd","onJoystickMoveEnd","what","onSettingsChanged","onVideoError","_ref","errorText","res","sent","reload","onVideoStarted","updateScaleButtons","statusInterval","setInterval","onVideoTime","t","statusExtra","toFixed","onVideoSize","onZoomIn","onZoomOut","plain","step","onCameraJoystickEnd","onCameraJoystickMove","fetchConfig","connectJoystick","joystick","WebSocket","onopen","onerror","err","onclose","timestamp","Date","now","response","json","data","cfg","replace","host","_React$createElement","Spinner_Spinner","Video_Video","MicButton_MicButton","FullscreenButton_FullscreenButton","Joystick_EngineJoystick","Joystick_CameraJoystick","SettingsButton_SettingsDropdown","ZoomButton_PlusButton","ZoomButton_MinusButton","Dialog_RetryReload","Status_Status","App","showDrive","getElementsByTagName","classList","toggle","getElementById","passive","DriveWindow_DriveWindow","ConnectWizard_ConnectWizard","ReactDOM","render","App_App","serviceWorker","ready","registration","unregister"],"mappings":"sSAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,qOCPAC,GAH4BJ,kNAOhCK,MAAQ,CACNC,QAAQ,KAEVC,EAAIC,IAAMC,cAEVC,QAAU,SAACC,GACTC,EAAKC,MAAMH,SAAWE,EAAKC,MAAMH,QAAXI,OAAAC,EAAA,EAAAD,QAAAC,EAAA,EAAAD,CAAAF,IAAyBD,4EAI/C,OACEK,EAAAT,EAAAU,cAAA,KAAGC,KAAK,IACNC,IAAKC,KAAKb,EACVc,UAAWC,IAAG,kBAAmB,yBACnB,CAAChB,OAAUc,KAAKf,MAAMC,SACpCI,QAASU,KAAKP,MAAMH,SAAWU,KAAKP,MAAMH,QAAQa,KAAKH,KAAMA,OAC3DJ,EAAAT,EAAAU,cAAA,OAAKI,UAAU,wBACbL,EAAAT,EAAAU,cAAA,OAAKI,UAAU,mBAAmBD,KAAKP,MAAMW,MAC7CR,EAAAT,EAAAU,cAAA,OAAKI,UAAU,OAAML,EAAAT,EAAAU,cAACQ,EAAA,EAAD,CAAiBC,KAAMN,KAAKP,MAAMc,OAAQC,IAAQC,OACvEb,EAAAT,EAAAU,cAAA,OAAKI,UAAU,qBACbL,EAAAT,EAAAU,cAACQ,EAAA,EAAD,CAAiBC,KAAMI,MACvBd,EAAAT,EAAAU,cAAA,OAAKI,UAAW,qCAAqCD,KAAKP,MAAMkB,2CAOnEC,GACPZ,KAAKa,SAAS,CAAC3B,OAAQ0B,qCAIvBZ,KAAKb,EAAE2B,QAAQC,+CAIf,OAAOf,KAAKP,MAAMW,oCAIlB,OAAOJ,KAAKP,MAAMc,cA7CCS,cAAjBhC,EACGiC,aAAe,CACpBN,KAAM,SA+CJO,6MACJjC,MAAQ,CACNkC,SAAS,EACTC,MAAO,MAETC,SAAW,OAuBXC,YAAc,SAACC,EAAIhC,GACdiC,EAAKvC,MAAMkC,UAGdM,QAAQC,IAAInC,EAAEoC,cAAeJ,GAE7BA,EAAGK,UAAS,GACZJ,EAAKH,SAAWE,EAChBC,EAAKX,SAAS,CAACM,SAAS,GAAO,WAC7BK,EAAK/B,MAAMoC,oQA7BCC,MAAM,+CAAhBC,kBACUA,EAAEC,KAAKC,YAAYC,cAA7BC,SACAC,EAAI,IAAIC,YAAY,SAASC,OAAOH,EAAEI,OACtCC,EAAWC,KAAKC,MAAMN,GAAIhB,EAAM,IAAIuB,IAAKC,EAAa,kCAC7CJ,wEAALK,WACDzB,EAAM0B,IAAID,EAAEE,OAAUF,EAAEE,6DAE3B3B,EAAM4B,IAAIH,EAAEE,KAAM,CAACxC,OAAoB,QAAZsC,EAAEI,SAAkBtC,KAAMuC,KAAKC,KAAKN,EAAEO,SAAS,qRAE9E,iCAAAC,EAAcjC,EAAdkC,OAAAC,cAAAC,GAAAC,EAAAJ,EAAAK,QAAAC,MAAAH,GAAA,EAAQI,EAAaH,EAAAlB,MAAAsB,EAAAnE,OAAAoE,EAAA,EAAApE,CACJkE,EADI,GACZG,EADYF,EAAA,GACTzB,EADSyB,EAAA,GAEjBjB,EAAWoB,KAAXtE,OAAAuE,EAAA,EAAAvE,CAAA,CAAiBU,KAAM2D,GAAM3B,8OAEjCpC,KAAKa,SAAS,CAACO,MAAOwB,yMAItB5C,KAAKkE,iDAkBLlE,KAAKqB,SAAS8C,yCAIdnE,KAAKa,SAAS,CAACM,SAAS,IACxBnB,KAAKqB,SAASO,UAAS,oCAGhB,IAAAwC,EAAApE,KACP,OACEJ,EAAAT,EAAAU,cAAA,OAAKI,UAAWC,IAAG,aAAc,UAAW,SAAU,gBAEnDF,KAAKf,MAAMmC,MAAMiD,IAAI,SAACC,GAAD,OAAO1E,EAAAT,EAAAU,cAAC0E,EAAD,CAAUnE,KAAMkE,EAAElE,KAAMG,OAAQ+D,EAAE/D,OAAQI,KAAM2D,EAAE3D,KAAM6D,IAAKF,EAAElE,KAAMd,QAAS8E,EAAK9C,sDAMpH,OAAOtB,KAAKqB,SAASkB,oDAIrB,OAAOvC,KAAKqB,SAASd,cAjENS,aAqEbyD,6MAQJxF,MAAQwF,EAAWC,eAInBC,KAAOvF,IAAMC,cACbuF,cAAgBxF,IAAMC,cACtBwF,YAAczF,IAAMC,cACpByF,QAAU1F,IAAMC,cAEhBwC,SAAW,WACTkD,EAAKlE,SAAS,CACZmE,kBAAmBD,EAAKJ,KAAK7D,QAAQmE,sBACrCC,OAAQH,EAAKJ,KAAK7D,QAAQmE,sBAC1B9D,SAAS,EACTgE,WAAY,kBACZ,WACEC,WAAW,WACTL,EAAKH,cAAc9D,QAAQuE,SAC3BN,EAAKJ,KAAK7D,QAAQqD,UACjB,QAMTmB,OAAS,WACJP,EAAK9F,MAAMkC,SACZ4D,EAAKlE,SAAS4D,EAAWC,cACzBK,EAAKJ,KAAK7D,QAAQyE,SAElBR,EAAKtF,MAAM6F,YAIfE,iBAAmB,SAACjG,GAClBkC,QAAQC,IAAInC,EAAEkG,OAAOlD,MAAMmD,QAC3BX,EAAKlE,SAAS,CACZqE,MAAO3F,EAAEkG,OAAOlD,MAAMmD,QAAU,EAChCC,SAAUpG,EAAEkG,OAAOlD,WAIvBqD,SAAW,SAACrG,GACVA,EAAEsG,iBACCd,EAAK9F,MAAMiG,OACZH,EAAKtF,MAAMqG,SAASf,EAAKJ,KAAK7D,QAAQiF,aAAchB,EAAK9F,MAAM0G,mFAIjE,OACE/F,EAAAT,EAAAU,cAAA,OAAKI,UAAWC,IACd,6EACAF,KAAKP,MAAMQ,UACX,CAAC+F,iBAAkBhG,KAAKf,MAAMkC,WAC9BvB,EAAAT,EAAAU,cAAA,OAAKI,UAAU,iDACbL,EAAAT,EAAAU,cAAA,QAAMI,UAAU,eAAegG,MAAO,CAACC,MAAO,SAC5CtG,EAAAT,EAAAU,cAAA,OAAKI,UAAU,UACbL,EAAAT,EAAAU,cAAA,OAAKI,UAAU,gCACZD,KAAKf,MAAMkG,YAEdvF,EAAAT,EAAAU,cAAA,OAAKI,UAAU,oBACbL,EAAAT,EAAAU,cAACQ,EAAA,EAAD,CAAiBC,KAAM6F,UAK/BvG,EAAAT,EAAAU,cAACuG,EAAD,CACEvE,SAAU7B,KAAK6B,SACf5B,UAAU,gBACVF,IAAKC,KAAK2E,OACZ/E,EAAAT,EAAAU,cAACwG,EAAA,EAAD,CAAUC,GAAItG,KAAKf,MAAM+F,mBACvBpF,EAAAT,EAAAU,cAAA,QAAME,IAAKC,KAAK6E,YAAa5E,UAAWC,IAAG,gBAAiB,aAAc,OAAQ,OAAQ,IAGtF4F,SAAU9F,KAAK4F,UACjBhG,EAAAT,EAAAU,cAAA,SAAO0G,KAAK,WACNtG,UAAU,eACVuG,YAAY,WACZC,SAAUzG,KAAKwF,iBACfjD,MAAOvC,KAAKf,MAAM0G,SAClB5F,IAAKC,KAAK4E,kBAIpBhF,EAAAT,EAAAU,cAAA,OAAKI,UAAU,iDACbL,EAAAT,EAAAU,cAAC6G,EAAA,EAAD,CAAQH,KAAK,SAASI,QAAQ,YAAY1G,UAAU,OAAOX,QAASU,KAAKsF,QAAzE,QAGA1F,EAAAT,EAAAU,cAAC6G,EAAA,EAAD,CAAQH,KAAK,SAASI,QAAS3G,KAAKf,MAAMkC,QAAS,UAAW,YAAa7B,QAASU,KAAK4F,SAAUgB,UAAU5G,KAAKf,MAAMiG,OAAxH,oBAhGelE,aAAnByD,EACGC,aAAe,CACpBQ,OAAO,EACPF,mBAAmB,EACnB7D,SAAS,EACTgE,WAAY,iBACZQ,SAAU,IANRlB,EASGxD,aAAe,CACpBhB,UAAW,QA+FT4G,mLAEF,OACEjH,EAAAT,EAAAU,cAAA,OAAKI,UAAWC,IACd,4FACAF,KAAKP,MAAMQ,YACXL,EAAAT,EAAAU,cAAA,OAAKI,UAAU,sBAAsB6G,KAAK,SACxClH,EAAAT,EAAAU,cAAA,MAAII,UAAU,iBAAd,QACAL,EAAAT,EAAAU,cAAA,8EACAD,EAAAT,EAAAU,cAAA,WACAD,EAAAT,EAAAU,cAAA,KAAGI,UAAU,QAAb,0EAVYe,aAiBhB+F,mLAEF,OACEnH,EAAAT,EAAAU,cAAA,OAAKI,UAAWC,IACd,yEACAF,KAAKP,MAAMQ,YACXL,EAAAT,EAAAU,cAAA,OAAKI,UAAU,aACbL,EAAAT,EAAAU,cAAA,MAAII,UAAU,aAAd,YACAL,EAAAT,EAAAU,cAAA,KAAGI,UAAU,QAAb,2BACAL,EAAAT,EAAAU,cAAA,MAAII,UAAU,SACdL,EAAAT,EAAAU,cAAA,8CACAD,EAAAT,EAAAU,cAAC6G,EAAA,EAAD,CAAQC,QAAQ,UAAUK,KAAK,KAAK1H,QAASU,KAAKP,MAAMqG,UAAxD,YACAlG,EAAAT,EAAAU,cAAA,MAAII,UAAU,SACdL,EAAAT,EAAAU,cAAA,0CACAD,EAAAT,EAAAU,cAAC6G,EAAA,EAAD,CAAQC,QAAQ,UAAUK,KAAK,KAAK1H,QAASU,KAAKP,MAAMwH,SAAxD,mBAdUjG,aAqBCkG,6MACnBjI,MAAQ,CACNkI,gBAAgB,EAChBC,kBAAkB,EAClBC,mBAAmB,EACnBC,qBAAqB,EACrBC,cAAc,EACdC,gBAAgB,EAChB9D,KAAM,gBAGR+D,aAAe,SAACC,EAAMC,GACpBlG,QAAQC,IAAIgG,EAAMC,GAClB,IAAIxF,EAAIM,KAAKmF,UAAU,CAACF,OAAMC,eAC9B7F,MAAM,+BAAgC,CAAC+F,OAAQ,OAAQ7F,KAAMG,IAAI2F,KAAK,WAClEC,EAAKlH,SAAS,CACVyG,qBAAqB,SAM/BU,WAAa,WACXD,EAAKlH,SAAS,CACZyG,qBAAqB,EACrB5D,KAAM,aAIVuE,mBAAqB,SAAC1I,GACpBkC,QAAQC,IAAInC,GACU,cAAnBwI,EAAK9I,MAAMyE,KACZqE,EAAKlH,SAAS,CACZwG,mBAAmB,EACnBF,gBAAgB,EAChBzD,KAAM,YAGRqE,EAAKlH,SAAS,CACZwG,mBAAmB,EACnBE,cAAc,EACdC,gBAAgB,EAChB9D,KAAM,kBAKZwE,cAAgB,SAAC3I,GACfwI,EAAKlH,SAAS,CACZ2G,gBAAgB,OAIpBW,cAAgB,SAAC5I,GACfwI,EAAKlH,SAAS,CACZ0G,cAAc,EACdD,qBAAqB,EACrBD,mBAAmB,6EAKrB,OACEzH,EAAAT,EAAAU,cAAAD,EAAAT,EAAAiJ,SAAA,KACCpI,KAAKf,MAAMsI,cACZ3H,EAAAT,EAAAU,cAACwI,EAAA,EAAD,CAAMC,QAAM,EAAChC,IAAKtG,KAAKf,MAAMuI,eAAgBe,SAAUvI,KAAKmI,eAC1DvI,EAAAT,EAAAU,cAAC2I,EAAD,CAAO1C,SAAU9F,KAAKkI,cAAejB,QAASjH,KAAKP,MAAMwH,WAE1DjH,KAAKf,MAAMkI,gBACZvH,EAAAT,EAAAU,cAACwI,EAAA,EAAD,CAAMC,QAAM,EAAChC,IAAKtG,KAAKf,MAAMmI,kBAC3BxH,EAAAT,EAAAU,cAAC4I,EAAD,OAEAzI,KAAKf,MAAMoI,mBACbzH,EAAAT,EAAAU,cAACwI,EAAA,EAAD,CAAMC,QAAM,EAAChC,IAAKtG,KAAKf,MAAMqI,oBAAqBiB,SAAUvI,KAAKiI,oBAC/DrI,EAAAT,EAAAU,cAAC6I,EAAD,CAAY5C,SAAU9F,KAAKyH,aAAcnC,OAAQtF,KAAKgI,sBA1EnBhH,0CCzQ5B2H,8EAAf,SAAAC,IAAA,OAAAC,EAAA1J,EAAA2J,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAArF,MAAA,cAAAqF,EAAAE,OAAA,SACS,IAAIC,QAAQ,SAACC,GAClBvK,OAAO+J,sBAAsBQ,MAFjC,wBAAAJ,EAAAK,SAAAR,6BAMA,IAAMS,EAAU,iBAAkBzK,OAEb0K,6MACnBrK,MAAQ,CAACsK,cAAe,MAQxBjK,QAAU,SAACC,GACTkC,QAAQC,IAAI,WACZlC,EAAKgK,aAAajK,MAGpBiK,mDAAe,SAAAC,EAAOlK,GAAP,OAAAsJ,EAAA1J,EAAA2J,KAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAhG,MAAA,cACbjC,QAAQC,IAAI,gBACZlC,EAAKC,MAAMH,QAAQC,GAFNmK,EAAAhG,KAAA,EAIPlE,EAAKmK,cAAc,CAACJ,cAAe,KAJ5B,cAAAG,EAAAhG,KAAA,EAKPiF,IALO,cAAAe,EAAAhG,KAAA,EAMPiF,IANO,cAAAe,EAAAhG,KAAA,GAOPlE,EAAKmK,cAAc,CAACJ,cAAe,aAP5B,yBAAAG,EAAAN,SAAAK,8DAUfG,WAAa,SAACrK,GACZkC,QAAQC,IAAI,cACTlC,EAAKC,MAAMoK,OACZtK,EAAEsG,+FAxBQ5G,GAAO,IAAAuC,EAAAxB,KACnB,OAAO,IAAIkJ,QAAQ,SAACC,GAClB3H,EAAKX,SAAS5B,EAAOkK,sCA0BvB,IAAIK,EAAcI,EAAYtK,EAE9B,IAAIU,KAAKP,MAAMqK,SAAU,KAAAC,EACM,CAAC/J,KAAKwJ,aAAcxJ,KAAK4J,YAArDJ,EADsBO,EAAA,GACRH,EADQG,EAAA,GAMzB,OAHG/J,KAAKP,MAAMqK,UAAaT,IACzB/J,EAAUU,KAAKV,SAGfM,EAAAT,EAAAU,cAAA,OAAKI,UAAWD,KAAKP,MAAMoK,MAAO,GAAI,aAClCG,GAAIhK,KAAKP,MAAMuK,GACf/D,MAAKvG,OAAAuE,EAAA,EAAAvE,CAAA,GAAOM,KAAKP,MAAMwG,QACzBrG,EAAAT,EAAAU,cAAA,OAAKI,UAAU,YACXL,EAAAT,EAAAU,cAAA,UACEI,UAAS,wBAAAgK,OAA0BjK,KAAKP,MAAMmH,SAAU,sBAAuB,IAC/E4C,aAAcA,EACdI,WAAYA,EACZtK,QAASA,EACT2G,MAAKvG,OAAAuE,EAAA,EAAAvE,CAAA,CAAI6J,cAAevJ,KAAKf,MAAMsK,eAAkBvJ,KAAKP,MAAMyK,cAC9DtK,EAAAT,EAAAU,cAACQ,EAAA,EAAD,CAAiBC,KAAMN,KAAKP,MAAMa,MAAQ6J,gBAlDtBnJ,aCVfoJ,6MACnBnL,MAAQ,CAACqB,KAAM+J,IAAiBC,OAAO,KAMvCC,YAAc,SAAChL,GACbkC,QAAQC,IAAI,wBACZlC,EAAKqB,SAAS,CAACyJ,OAAQ9K,EAAKP,MAAMqL,OAAQ,WACxC9K,EAAKC,MAAM+K,OAAOhL,EAAKP,MAAMqL,6FAN/BtK,KAAKa,SAAS,CAACyJ,MAAOtK,KAAKP,MAAM6K,yCAWjC,OAAS1K,EAAAT,EAAAU,cAAC4K,EAAD,CAAQT,GAAG,iBACR/D,MAAO,CACLyE,IAAK,mBACLC,KAAM,oBAERrK,KAAMN,KAAKf,MAAMqL,MAAOM,IAAsBP,IAC9C/K,QAASU,KAAKuK,qBArBSvJ,aCSvC,SAAS6J,IACP,SAAUC,SAASC,0BAA2BD,SAASE,0BAGpCC,cAGnB,SAAAA,IAAc,IAAAzL,EAAA,OAAAE,OAAAwL,EAAA,EAAAxL,CAAAM,KAAAiL,IACZzL,EAAAE,OAAAyL,EAAA,EAAAzL,CAAAM,KAAAN,OAAA0L,EAAA,EAAA1L,CAAAuL,GAAAI,KAAArL,QAHFf,MAAQ,CAACqB,KAAMgL,KAED9L,EAMd+L,aAAe,WACb9J,QAAQC,IAAI,cACZ,IAAI8J,EAAKX,IACTrL,EAAKqB,SAAS,CAACP,KAAMkL,EAAIC,IAAYH,OATzB9L,EAYd+K,YAAc,SAAChL,GACbkC,QAAQC,IAAI,+BA9BhB,SAAoB8J,GAClB,GAAGA,EAAI,CACL,IAAIjM,EAAIuL,SAASY,gBAChBnM,EAAEoM,sBAAwBpM,EAAEoM,wBAC5BpM,EAAEqM,yBAA2BrM,EAAEqM,+BAE7Bd,SAASe,wBAA0Bf,SAASe,0BAC5Cf,SAASgB,qBAAuBhB,SAASgB,sBAwB5CC,EAAYlB,MAZZC,SAASkB,iBAAiB,yBAA0BxM,EAAK+L,cACzDT,SAASkB,iBAAiB,sBAAuBxM,EAAK+L,cAH1C/L,wEAkBZ,OAASI,EAAAT,EAAAU,cAAC4K,EAAD,CAAQX,UAAQ,EACb7D,MAAO,CACLyE,IAAK,MACLC,KAAM,MAERrK,KAAMN,KAAKf,MAAMqB,KACjBhB,QAASU,KAAKuK,YACdP,GAAG,iCA5B2BhJ,aCbxCiL,6MACF3M,QAAU,SAACC,GACNC,EAAKC,MAAMmH,UAEdpH,EAAKC,MAAMH,QAAQC,4EAInB,OAASK,EAAAT,EAAAU,cAAC4K,EAAD,CAAQ7D,SAAU5G,KAAKP,MAAMmH,SAC1BX,MAAOjG,KAAKP,MAAMwG,MAClBiE,YAAa,CACXhE,MAAO,OACPgG,OAAQ,OACRC,SAAU,QAEZ7L,KAAMN,KAAKP,MAAMa,KACjBhB,QAASU,KAAKV,QACd0K,GAAIhK,KAAKP,MAAMuK,YAjBRhJ,aAsBnBoL,mLAEE,OAASxM,EAAAT,EAAAU,cAACwM,EAAD,CAAYzF,SAAU5G,KAAKP,MAAMmH,SAC9BX,MAAO,CACLyE,IAAK,oBACLC,KAAM,oBAERrK,KAAMgM,IACNhN,QAASU,KAAKP,MAAMH,QACpB0K,GAAG,2BATEiC,GAcnBM,mLAEE,OAAS3M,EAAAT,EAAAU,cAACwM,EAAD,CAAYzF,SAAU5G,KAAKP,MAAMmH,SAC9BX,MAAO,CACLyE,IAAK,mBACLC,KAAM,oBAERrK,KAAMkM,IACNlN,QAASU,KAAKP,MAAMH,QACpB0K,GAAG,4BATGhJ,wCClCLyL,6MAC8BC,GAAKtN,IAAMC,cAC5DJ,MAAQ,CAAC0N,MAAM,EAAOC,SAAU,OAAQC,QAAS,gBAGjDC,gBAAkB,SAACvN,GAAM,IAAAwN,EACDxN,EAAEkG,OAAjBiC,EADgBqF,EAChBrF,KAAMnF,EADUwK,EACVxK,MACbd,QAAQC,IAAI,qBAAsBgG,EAAMnF,EAAO/C,EAAKP,OACpDO,EAAKC,MAAMgH,SAASiB,EAAMnF,GAC1B/C,EAAKqB,SAALnB,OAAAsN,EAAA,EAAAtN,CAAA,GAAgBgI,EAAOnF,6EAIvB,OACE3C,EAAAT,EAAAU,cAACoN,EAAA,EAAD,CAAUC,KAAK,KAAKjH,MAAO,CACvBkH,SAAU,QACVzC,IAAK,mBACLC,KAAM,OAEN/K,EAAAT,EAAAU,cAACoN,EAAA,EAASG,OAAV,CAAiBC,GAAI/D,EAAQhJ,KAAMgN,IAAOzD,OAAK,IAE/CjK,EAAAT,EAAAU,cAACoN,EAAA,EAASM,KAAV,KACE3N,EAAAT,EAAAU,cAAC2N,EAAA,EAAD,CAAMvN,UAAU,aAEZL,EAAAT,EAAAU,cAAC2N,EAAA,EAAKC,MAAN,KACI7N,EAAAT,EAAAU,cAAC2N,EAAA,EAAKE,MAAN,iBACA9N,EAAAT,EAAAU,cAAC2N,EAAA,EAAKG,QAAN,CAAcN,GAAG,SACf3F,KAAK,WACLjB,SAAUzG,KAAK8M,gBACfvK,MAAOvC,KAAKf,MAAM2N,UAChBhN,EAAAT,EAAAU,cAAA,UAAQ0C,MAAM,QAAd,QACA3C,EAAAT,EAAAU,cAAA,UAAQ0C,MAAM,YAAd,OACA3C,EAAAT,EAAAU,cAAA,UAAQ0C,MAAM,aAAd,aACA3C,EAAAT,EAAAU,cAAA,UAAQ0C,MAAM,cAAd,gBAKR3C,EAAAT,EAAAU,cAAC2N,EAAA,EAAKC,MAAN,KACI7N,EAAAT,EAAAU,cAAC2N,EAAA,EAAKE,MAAN,gBACA9N,EAAAT,EAAAU,cAAC2N,EAAA,EAAKG,QAAN,CAAcN,GAAG,SACf3F,KAAK,UACLnF,MAAOvC,KAAKf,MAAM4N,QAClBpG,SAAUzG,KAAK8M,iBACblN,EAAAT,EAAAU,cAAA,UAAQ0C,MAAM,eAAd,OACA3C,EAAAT,EAAAU,cAAA,UAAQ0C,MAAM,eAAd,UACA3C,EAAAT,EAAAU,cAAA,UAAQ0C,MAAM,cAAd,oBA9CsBvB,aCHxC4M,iBAAI,IACNC,EAAgB,cAAA5D,OADD2D,GACC,mBAAA3D,OADD2D,GACC,OAChBE,EAAa,CAACC,EAAG,KAAMC,EAAG,QAASC,EAAG,OAAQC,EAAG,QAEhCC,6MACjBC,WAAahP,IAAMC,cACnBgP,SAAWjP,IAAMC,cACjBiP,SAAWlP,IAAMC,cACjBJ,MAAQ,CACJsP,cAAc,EACdC,eAAgBX,KAGpBY,YAAc,SAAClP,GACXkC,QAAQC,IAAInC,MAGhBmP,YAAc,SAACnP,GACXkC,QAAQC,IAAI,eACZnC,EAAEsG,iBACFrG,EAAKqB,SAAS,CAAC0N,cAAc,IAC7B/O,EAAKmP,cAAcpP,GAAG,MAG1BqP,aAAe,SAACrP,GACZkC,QAAQC,IAAI,gBACZD,QAAQC,IAAInC,EAAEsP,QAAStP,EAAEuP,eACzBtP,EAAKqB,SAAS,CAAC0N,cAAc,IAC7B/O,EAAKmP,cAAcpP,GAAG,MAG1BwP,YAAc,SAACxP,GACPC,EAAKP,MAAMsP,eAGf9M,QAAQC,IAAI,eACZlC,EAAKqB,SAAS,CACV0N,cAAc,EACdC,eAAgBX,IAEpBrO,EAAKC,MAAMuP,OAASxP,EAAKC,MAAMuP,YAGnCL,cAAgB,SAACpP,EAAGqB,GAChB,GAAKA,GAAKpB,EAAKP,MAAMsP,aAArB,CAGAhP,EAAEsG,iBAEF,IAAIoJ,EAAK1P,EAAE2P,YAEPC,GAFyB5P,EAAEkG,OAEvBwJ,EAAGH,cAAeG,EAAGH,cAAc,GAAGM,MAAOH,EAAGG,OACpDC,EAAIJ,EAAGH,cAAeG,EAAGH,cAAc,GAAGQ,MAAOL,EAAGK,MACrDL,EAAGH,gBAEFO,GAAKJ,EAAGH,cAAc,GAAGS,QAAQ,GAErC/P,EAAKgQ,KAAKL,EAAGE,OAmCjBI,aAAe,SAAClQ,GACTA,EAAEkG,QAAUjG,EAAK4O,WAAWtN,UAC3BW,QAAQC,IAAI,eAAgBnC,EAAEkG,QAC9BjG,EAAKuP,YAAYxP,yEAnCpB4P,EAAGE,GACJ,IAU0BK,EAAIC,EAV1B5N,EAAI/B,KAAKsO,SAASxN,QAAQ8O,wBAE1BC,EAAGV,EA/DIvB,GA8DF7L,EAAEoN,EACKW,EAAGT,EA/DRzB,GA8DQ7L,EAAEsN,EAIjBU,EAAkBhO,EAAEoN,EAAIpN,EAAEmE,MAAM,EAAhC6J,EAAsChO,EAAEsN,EAAItN,EAAEmK,OAAO,EACrD8D,EAAkBb,EAAlBa,EAAwBX,EACxBY,EAAW/M,KAAKgN,KAAKhN,KAAKiN,IAAIJ,EAAcC,EAAe,GACvC9M,KAAKiN,IAAIJ,EAAcC,EAAe,IAC1D7Q,EAAI+D,KAAKkN,MAAML,EAAcC,GAAeC,GAC5CI,EAAQ,IAAFlR,EAAO+D,KAAKoN,GACnBP,EAAcC,EAAgB,GAC7BK,EAAM,IAAMA,EACZX,EAAKxM,KAAKqN,IAAIrN,KAAKoN,GAAGnR,GAAGyO,EA1ElBA,GA2EP+B,EAAKzM,KAAKsN,IAAIrR,GAAGyO,EA3EVA,KA6EP8B,EAAKxM,KAAKqN,IAAIrN,KAAKoN,GAAGnR,GAAGyO,EA7ElBA,GA8EP+B,EAAKzM,KAAKsN,KAAKrR,GAAGyO,EA9EXA,IAgFXyC,GAAOA,EAAI,KAAK,IAChB,IAAII,GAAOvN,KAAKwN,OAAOL,EAAI,IAAK,IAAK,GAAG,EACxC5O,QAAQC,IAAIuO,EAASrC,EAAGyC,EAAKI,GAC1BR,EAAWrC,IACTiC,EAAWH,EAAPI,EAAWH,GAEpB3P,KAAKa,SAAS,CAAC2N,eAAc,cAAAvE,OAAgB4F,EAAhB,mBAAA5F,OAAoC6F,EAApC,SACzBhC,EAAW2C,IACXhP,QAAQkP,MAAM,gBAAgBF,GAClCzQ,KAAKP,MAAMmR,QAAU5Q,KAAKP,MAAMmR,OAAOP,EAAKJ,EAASrC,EAAGE,EAAW2C,qCAWnE,OACI7Q,EAAAT,EAAAU,cAAA,OAAKI,UAAW,8BACZ4Q,YAAa7Q,KAAK2O,cAClBmC,UAAW9Q,KAAK+O,YAChBgC,aAAc/Q,KAAKyP,aACnBuB,YAAahR,KAAK2O,cAClB/E,WAAY5J,KAAK+O,YACjBhP,IAAKC,KAAKoO,WACVnI,MAAO,CACHgL,WAAYjR,KAAKf,MAAMsP,aAAc,UAAW,SAChD2C,OAAQlR,KAAKf,MAAMsP,aAAc,WAAY,SAKjD3O,EAAAT,EAAAU,cAAA,OAAKI,UAAS,kBAAAgK,OAAoBjK,KAAKf,MAAMsP,aAAc,kBAAmB,GAAhE,KAAAtE,OAAsEjK,KAAKP,MAAMQ,WAC3FwO,YAAazO,KAAK0O,YAClBlF,aAAcxJ,KAAK4O,aACnB7O,IAAKC,KAAKsO,SACVrI,MAAO,CACHiL,OAAQlR,KAAKf,MAAMsP,aAAc,WAAY,SAEjD3O,EAAAT,EAAAU,cAAA,OAAKI,UAAU,iBACXF,IAAKC,KAAKqO,SACVpI,MAAO,CACHkL,UAAWnR,KAAKf,MAAMuP,2BAzHZxN,aCHhCoQ,EAAU,EAEHC,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA/R,EAAAE,OAAAwL,EAAA,EAAAxL,CAAAM,KAAAqR,GAAA,QAAAG,EAAAC,UAAA/L,OAAAgM,EAAA,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAAF,EAAAE,GAAAH,UAAAG,GAAA,OAAApS,EAAAE,OAAAyL,EAAA,EAAAzL,CAAAM,MAAAuR,EAAA7R,OAAA0L,EAAA,EAAA1L,CAAA2R,IAAAhG,KAAAwG,MAAAN,EAAA,CAAAvR,MAAAiK,OAAAyH,MACII,MAAQ,KADZtS,EAEIuS,MAAQ,KAFZvS,EAGIwS,GAAK,KAHTxS,EASIoR,OAAS,SAACzR,EAAG8S,EAAG9P,GACZ,IAAIA,EACA,OAAOV,QAAQkP,MAAM,wBAEzB,IAAIuB,EAAS,CACTvH,KAAM,CAAC,IAAKsH,GACZE,MAAO,CAAC,KAAMF,GACdG,KAAM,CAAC,IAAKH,GACZI,GAAI,CAAC,KAAMJ,IARGK,EAAA5S,OAAAoE,EAAA,EAAApE,CAWGwS,EAAO/P,GAXV,GAWb2P,EAXaQ,EAAA,GAWNP,EAXMO,EAAA,GAYlB9S,EAAKsS,MAAQA,EAAOtS,EAAKuS,MAAQA,EACjCvS,EAAKgQ,QAtBbhQ,EAyBIwP,MAAQ,WACDxP,EAAKwS,KACJO,cAAc/S,EAAKwS,IACnBxS,EAAKwS,GAAK,MAEdxS,EAAKC,MAAMuP,SA9BnBxP,EAAA,OAAAE,OAAA8S,EAAA,EAAA9S,CAAA2R,EAAAC,GAAA5R,OAAA+S,EAAA,EAAA/S,CAAA2R,EAAA,EAAA7M,IAAA,OAAAjC,MAAA,WAMQd,QAAQC,IAAI1B,KAAK8R,MAAO9R,KAAK+R,OAC7B/R,KAAKP,MAAMmR,OAAO5Q,KAAK8R,MAAO9R,KAAK+R,SAP3C,CAAAvN,IAAA,SAAAjC,MAAA,WAkCQ,OACI3C,EAAAT,EAAAU,cAAC6S,EAAD,CAAU1D,MAAOhP,KAAKgP,MACZ4B,OAAQ5Q,KAAK4Q,OACb3Q,UAAU,uBArChCoR,EAAA,CAAoCrQ,aA0CvB2R,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAArR,EAAA9B,OAAAwL,EAAA,EAAAxL,CAAAM,KAAA2S,GAAA,QAAAG,EAAArB,UAAA/L,OAAAgM,EAAA,IAAAC,MAAAmB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAArB,EAAAqB,GAAAtB,UAAAsB,GAAA,OAAAvR,EAAA9B,OAAAyL,EAAA,EAAAzL,CAAAM,MAAA6S,EAAAnT,OAAA0L,EAAA,EAAA1L,CAAAiT,IAAAtH,KAAAwG,MAAAgB,EAAA,CAAA7S,MAAAiK,OAAAyH,MACIsB,UAAY,KADhBxR,EAEIyR,WAAa,KAFjBzR,EAQIoP,OAAS,SAACzR,EAAG4S,GACT,IAAIE,EAAIF,EACLE,EAAI,IACHA,EAAI,GAER,IAAIiB,EAAU,EACX/T,EAAI,GACH+T,EAAU,GAAK1R,EAAK2R,YAAYhU,EAAGiS,GAE7BjS,GAAK,IAAQA,EAAI,IACvB+T,EAAU,GAAG,IAAM,EAAI1R,EAAK2R,YAAY,IAAIhU,EAAGiS,IAEzCjS,GAAK,KAASA,EAAI,IACxB+T,EAAU,IAAI,GAAK1R,EAAK2R,YAAYhU,EAAE,IAAKiS,GAErCjS,GAAK,KAASA,EAAI,MACxB+T,EAAU,IAAI,IAAM,EAAI1R,EAAK2R,YAAY,IAAIhU,EAAGiS,KAIpD3P,QAAQC,IAAI,WAAYwR,GACxB1R,EAAK/B,MAAMmR,OAAOqB,EAAGiB,IA7B7B1R,EAgCIwN,MAAQ,WACJxN,EAAK/B,MAAMuP,SAjCnBxN,EAAA,OAAA9B,OAAA8S,EAAA,EAAA9S,CAAAiT,EAAAC,GAAAlT,OAAA+S,EAAA,EAAA/S,CAAAiT,EAAA,EAAAnO,IAAA,cAAAjC,MAAA,SAIgBpD,EAAG4E,GACX,OAAOb,KAAKkQ,MAAMjU,GAAG,GAAI4E,IAAIb,KAAKkQ,MAAM,EAAErP,KALlD,CAAAS,IAAA,SAAAjC,MAAA,WAqCQ,OACI3C,EAAAT,EAAAU,cAAC6S,EAAD,CAAU9B,OAAQ5Q,KAAK4Q,OACb5B,MAAOhP,KAAKgP,MACZ/O,UAAU,sBAxChC0S,EAAA,CAAoC3R,sCC1C9BqS,GAAiB,IACjBC,GAAK,EAAGC,GAAK,EAAGC,GAAO,KAAMC,GAAO,KAAMC,GAAO,GAAIC,GAAO,GAC5DC,GAAO,CACTC,KAAM,OACNC,KAAM,QACNC,KAAM,OACNC,KAAM,MAEJC,GAAQ,CAACC,YAAa,GAAKC,YAAa,GAAKC,WAAY,GACzD/K,GAAU,iBAAkBzK,OAEbyV,8MACjBpV,MAAQ,CAACqV,WAAW,EAAOC,YAAY,KAEvCC,eAAYC,IACZC,QAAU,SACV7H,QAAU,IACV8H,SAAW,IACXC,MAAQ,IACRC,GAAG,IAAGC,GAAG,IAAGC,EAAE,IAAGC,EAAE,IAE6BC,MAAQ7V,IAAMC,cAG9D6V,UAAY,SAAC3V,GACN8J,KACC9J,EAAEsG,iBACFtG,EAAE4V,mBAGN,IAAIlG,EAAK1P,EAAE2P,YAEPC,EAAIF,EAAGJ,QAASI,EAAGJ,QAAQ,GAAGO,MAAOH,EAAGG,MACxCC,EAAIJ,EAAGJ,QAASI,EAAGJ,QAAQ,GAAGS,MAAOL,EAAGK,MAC5C9P,EAAKuV,EAAI5F,EAAI3P,EAAKqV,GAClBrV,EAAKwV,EAAI3F,EAAI7P,EAAKsV,MAKtBM,UAAY,SAAC7V,GACN8J,KACC9J,EAAEsG,iBACFtG,EAAE4V,mBAGN,IAAIlG,EAAK1P,EAAE2P,YAAa3N,EAAKhC,EAAEkG,OAC/B,GAAiB,aAAXwJ,EAAG1I,MAAqC,GAAd0I,EAAGoG,SAA4B,aAAXpG,EAAG1I,KAAvD,CAGAhH,EAAEsG,iBACF,IAAIsJ,EAAIF,EAAGJ,QAASI,EAAGJ,QAAQ,GAAGO,MAAOH,EAAGG,MACxCC,EAAIJ,EAAGJ,QAASI,EAAGJ,QAAQ,GAAGS,MAAOL,EAAGK,MACxCO,EAAKV,EAAI3P,EAAKuV,EAAGjF,EAAKT,EAAI7P,EAAKwV,EACnCvT,QAAQ6T,MAAM/T,EAAIsO,GAElB,IAAI0F,EAAO/V,EAAKyV,MAAMnU,QAAQ8O,wBAC1B4F,EAAI1K,SAASY,gBAAgB+J,YAC7BC,EAAI5K,SAASY,gBAAgBiK,aAE7BC,GAAQL,EAAKrP,MAAMsP,GAAG,EACtBK,GAAQN,EAAKrJ,OAAOwJ,GAAG,EACxBE,GAAQ,IACJ/F,EAAK,GAAKA,EAAK+F,EACd/F,EAAK+F,EACD/F,EAAK,GAAKA,GAAM+F,IACpB/F,GAAM+F,IAEXC,GAAQ,IACJ/F,EAAK,GAAKA,EAAK+F,EACd/F,EAAK+F,EACD/F,EAAK,GAAKA,GAAM+F,IACpB/F,GAAM+F,IAEXD,GAAQ,GAAKC,GAAQ,GACpBrW,EAAKsW,aAAajG,EAAIC,OAI9BiG,QAAU,SAACxW,GACPkC,QAAQC,IAAInC,GACTC,EAAKC,MAAM6K,OACV9K,EAAKwW,MAAK,GACdxW,EAAKC,MAAMwW,UAAUzW,EAAKgV,WAC1BhV,EAAK0W,YAGTC,OAAS,SAAC5W,GACNkC,QAAQC,IAAInC,MAGhB6W,KAAO,SAAC7W,GAGJC,EAAKC,MAAM4W,OAAO9W,EAAEkG,OAAO6Q,gBAqJ/BJ,OAAS,SAAC3W,GACN,IAEIiW,EAAGE,EAFHa,EAAIzL,SAASY,gBAAgB+J,YAAYjW,EAAKqN,QAC9C2J,EAAI1L,SAASY,gBAAgBiK,aAAanW,EAAKqN,QAEnDpL,QAAQC,IAAR,GAAAuI,OAAesM,EAAf,KAAAtM,OAAoBuM,IAGShB,GAA7BE,EAAIxS,KAAKuT,MAAMD,EAAEjD,GAAG,GAAGA,GAAG,GAASD,GAAGC,GACtC,IAAImD,EAAKxT,KAAKyT,IAAIH,EAAEd,GAAIkB,EAAK1T,KAAKyT,IAAIJ,EAAEf,GACxC/T,QAAQC,IAAR,eAAAuI,OAA2BuL,EAA3B,KAAAvL,OAAgCyL,EAAhC,KAAAzL,OAAqC2M,EAArC,KAAA3M,OAA2CyM,EAA3C,KAAAzM,OAAiDuL,EAAEE,IACnD,IAAwBmB,EAAKrB,EAAGsB,EAAKpB,EAGRA,GAA7BF,EAAItS,KAAKuT,MAAMF,EAAEjD,GAAG,GAAGA,GAAG,GAASC,GAAGD,GACtCoD,EAAKxT,KAAKyT,IAAIH,EAAEd,GAAIkB,EAAK1T,KAAKyT,IAAIJ,EAAEf,GACpC/T,QAAQC,IAAR,cAAAuI,OAA0BuL,EAA1B,KAAAvL,OAA+ByL,EAA/B,KAAAzL,OAAoC2M,EAApC,KAAA3M,OAA0CyM,EAA1C,KAAAzM,OAAgDuL,EAAEE,IAClD,IAEIqB,EAFoBC,EAAKxB,EAAGyB,EAAKvB,EAGrC,OAAOlW,EAAKkV,SACR,IAAK,YACDqC,EAAM,CAACzC,WAAW,EAAMC,YAAY,GACpCiB,EAAEwB,EAAItB,EAAEuB,EACZ,MACA,IAAK,aACDF,EAAM,CAACzC,WAAW,EAAOC,YAAY,GACrCiB,EAAEqB,EAAInB,EAAEoB,EACZ,MACA,IAAK,WACDC,EAAM,CAACzC,WAAW,EAAMC,YAAY,GACjCgC,EAAEC,EAAIlD,GAAGC,IAERiC,EAAIqB,EAAInB,EAAIoB,IAGZtB,EAAIwB,EAAItB,EAAIuB,GAEpB,MACA,IAAK,OACEV,EAAEC,EAAIlD,GAAGC,IACRwD,EAAM,CAACzC,WAAW,EAAOC,YAAY,GACrCiB,EAAEqB,EAAInB,EAAEoB,IAERC,EAAM,CAACzC,WAAW,EAAMC,YAAY,GACpCiB,EAAEwB,EAAItB,EAAEuB,GAKpBxV,QAAQC,IAAR,aAAAuI,OAAyBuL,EAAzB,KAAAvL,OAA8ByL,GAAKqB,GAChCvB,GAAKhC,IAAQkC,GAAKjC,IACjB+B,EAAIhC,GAAMkC,EAAIjC,KACR+B,GAAK9B,IAAQgC,GAAK/B,MACxB6B,EAAI9B,GAAMgC,EAAI/B,IAElB,IAAIuD,EAAO1B,EAAG2B,EAAOzB,EAErBlW,EAAKqB,SAASkW,EAAK,WACfvX,EAAK4X,KAAK,GACP5X,EAAKmV,UACJ0C,aAAa7X,EAAKmV,UAEtBnV,EAAKmV,SAAWvP,WAAW,WACvB5F,EAAKC,MAAM6X,SAASJ,EAAMC,GAC1B3X,EAAKmV,SAAW,MACjBtB,SAqCXkE,UAAY,SAAChY,GACTkC,QAAQC,IAAInC,EAAEiY,MACX5D,GAAKrU,EAAEiY,OACNhY,EAAKC,MAAMgY,aAAa7D,GAAKrU,EAAEiY,2FA3PnB,IAAAhW,EAAAxB,KAChBA,KAAK0X,gBAAgB5P,KAAK,WACtBtG,EAAK0U,WAETtX,OAAOoN,iBAAiB,SAAU,SAACzM,GAC/BiC,EAAK0U,SACLzU,QAAQC,IAAInC,KAGhBX,OAAOoN,iBAAiB,UAAW,SAACzM,GAChCiC,EAAK+V,UAAUhY,gDAIJoY,GACZ3X,KAAKP,MAAM6K,OAASqN,EAAUrN,OAC7BtK,KAAKgW,KAAKhW,KAAKP,MAAM6K,+LAKrBtK,KAAKP,MAAMmY,OAAOC,8DAGlBC,EAAOC,IAAMC,uBAAuB,CAACC,uBACnC,IAAI/O,QAAQ,SAAAC,GAAO,OAAI4O,IAAMG,KAAK,CACpC5C,MAAO,MACP6C,aAAcL,EACdM,SAAUjP,oBACd1H,QAAQC,IAAI,gBAER2W,wCAAqB,SAAA5O,EAAOlK,GAAP,OAAAsJ,EAAA1J,EAAA2J,KAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAhG,MAAA,UACrBjC,QAAQC,IAAInC,EAAG6E,EAAKoQ,WACP,mBAAVjV,EAAEmI,OAA6BtD,EAAKoQ,UAFlB,CAAA9K,EAAAhG,KAAA,QAGjBU,EAAKoQ,WAAY,EAHA9K,EAAAhG,KAAA,mBAIN,2BAALnE,EAJW,CAAAmK,EAAAhG,KAAA,eAAAgG,EAAAT,OAAA,wBAAAS,EAAAhG,KAAA,GAOXU,EAAK3E,MAAM6Y,QAAQ/Y,GAPR,QASrBsY,EAAMU,UATe,yBAAA7O,EAAAN,SAAAK,4DAYrBsO,IAAMS,qBACNH,EAAmB,yBAGZI,EAAGzY,eACR,IAAIkJ,QAAQ,SAACC,EAASuP,GAAab,EAAQ,IAAIE,IAAM,CACnDY,OAAQF,EAAGhZ,MAAMmY,OAAOC,MACxBe,QAASzP,EACTwH,MAAO0H,EACPQ,UAAW,kBAAMzU,EAAKsT,oCAG9BjW,QAAQC,IAAI,mBAERoX,EAAW,iBAAiBf,IAAMgB,aAAa,cAC7B,IAAI7P,QAAQ,SAACC,EAASuP,GACxCb,EAAMmB,OAAO,CACTC,OAAQ,yBACRH,SAAUA,EACVF,QAASzP,EACTwH,MAAO0H,EACPa,UAAW,SAACC,EAAKC,GACbrB,IAAMzC,MAAM,0BACZyC,IAAMzC,MAAM6D,GACZ,IAAIE,EAASF,EAAIE,OACdA,GAAUA,EAAOC,OACI,WAAjBD,EAAOC,SACN7X,QAAQC,IAAI,sBAIT+W,EAAGxD,MAAMnU,QAAQyY,OAAO7T,QACvB+S,EAAG1C,WAGLoD,EAAIxI,OACV0H,EAAmBc,EAAIxI,OAExByI,IACCrB,IAAMzC,MAAM,2BACZyC,IAAMzC,MAAM8D,GAEZI,EAAUC,aAAa,CACnBL,KAAMA,EACNM,MAAO,CAAEC,UAAWvV,EAAKoQ,UAAWoF,WAAW,GAC/ChB,QAAS,SAASQ,GACdrB,IAAMzC,MAAM,YACZyC,IAAMzC,MAAM8D,GACZI,EAAUK,KAAK,CACXC,QAAS,CAAEC,QAAS,SACpBX,KAAMA,KAIdzI,MAAO0H,MAInB2B,eAAgB,SAACC,GACblC,IAAMzC,MAAM,gCACZyC,IAAMzC,MAAM2E,GACZxY,QAAQC,IAAI,gCACZ,IAAIwY,EAAMzB,EAAGxD,MAAMnU,QACnBiX,IAAMoC,kBAAkBD,EAAKD,GAC7BC,EAAI5P,OAAQ,GAEhB8P,UAAW,WACPrC,IAAMrW,IAAI,wCAEd2Y,SAAU,SAACC,EAAEzX,GACTpB,QAAQ8Y,KAAK,WAAYD,EAAGzX,uBAvDpC2W,SA2DJxZ,KAAKwZ,UAAYA,EACjB/X,QAAQC,IAAI,mCAEQ8Y,UAAUC,aAAaC,8BAAvCC,cAEkBlG,IAAnBzU,KAAKwU,2BACJ,iCAAAoG,EAAaD,EAAbrX,OAAAC,cAAAsX,GAAAC,EAAAF,EAAAlX,QAAAC,MAAAkX,GAAA,EACiB,cADKC,EAAAvY,MACbwY,OACD/a,KAAKwU,WAAY,kPAEHC,IAAnBzU,KAAKwU,YACJxU,KAAKwU,WAAY,4BAGN,IAAItL,QAAQ,SAAAC,GAAO,OAAIqQ,EAAUK,KAAK,CACrDC,QAAS,CAAEC,QAAS,QACpBnB,QAASzP,kBAFTkQ,UAKO1U,MA1OD,GA0OS0U,EAAO1U,KAAK,GAAGqF,yBACxB,gCAGVwP,EAAUK,KAAK,CACXC,QAAS,CAAEC,QAAS,QAAS/P,GA/OvB,gKAyTVtC,EAAMnF,GACN,GAAW,YAARmF,EACC1H,KAAK0U,QAAUnS,MACZ,IAAW,WAARmF,EAIN,YADAjG,QAAQkP,MAAR,YAAA1G,OAA0BvC,EAA1B,MAFA1H,KAAK6M,QAAUoH,GAAQ1R,GAK3BvC,KAAKkW,8CAGIrG,EAAIC,EAAI8E,GACjB,IAAIoG,EAAE,qBAAA/Q,OAAwB4F,EAAxB,gBACH7P,KAAKf,MAAMqV,UACV0G,GAAE,qBAAA/Q,OAAyB6F,EAAzB,gBAEFkL,GAAE,cAAA/Q,OAAkB6F,EAAlB,OACF8E,IACAA,EAAQ5U,KAAK4U,OACjBoG,GAAE,UAAA/Q,OAAc2K,EAAd,KACF5U,KAAKa,SAAS,CAACsQ,UAAW6J,IAC1Bhb,KAAK6U,GAAKhF,EAAI7P,KAAK8U,GAAKhF,+BAGvBmL,GACO,GAALA,EACCjb,KAAK4U,MAAQ,EAEb5U,KAAK4U,OAASqG,EAClBjb,KAAK8V,aAAa,EAAG,gCASpBlV,GACGZ,KAAKwU,YAET/S,QAAQC,IAAI,OAAQd,GAChBZ,KAAKwZ,YAGN5Y,EACCZ,KAAKwZ,UAAU0B,YAEflb,KAAKwZ,UAAU2B,iDAQnB,IAAInb,KAAKwZ,UACL,MAAO,aACX,IAAI5Y,EAAIwa,SAASpb,KAAKwZ,UAAU6B,cAC5BjZ,EAAIpC,KAAKiV,MAAMnU,QACfyV,EAAInU,EAAEkZ,WACN9E,EAAIpU,EAAEmZ,YAGV,MAFiD,UAA9CxD,IAAMyD,cAAcC,eAAeC,UAClC9a,EAAIsC,KAAKuT,MAAM7V,EAAI,MACvB,GAAAqJ,OAAUsM,EAAV,KAAAtM,OAAeuM,EAAf,OAAAvM,OAAsBrJ,EAAtB,0CAIA,OACAhB,EAAAT,EAAAU,cAAA,SAAO8b,UAAQ,EAACrR,OAAK,EAACsR,aAAW,EAACC,MAAI,EAClC7R,GAAG,UACH/J,UAAS,GAAAgK,OAAKjK,KAAKf,MAAMqV,UAAW,YAAa,GAAxC,KAAArK,OAA8CjK,KAAKf,MAAMsV,WAAY,aAAc,IAC5FtO,MAAO,CAACkL,UAAWnR,KAAKf,MAAMkS,WAC9BpR,IAAKC,KAAKiV,MACVxG,YAAazO,KAAKkV,UAClBrE,YAAa7Q,KAAKoV,UAClB5L,aAAcxJ,KAAKkV,UACnBlE,YAAahR,KAAKoV,UAClBmC,UAAWvX,KAAKuX,UAChBuE,UAAW9b,KAAK+V,QAASgG,aAAc/b,KAAKoW,MAVhD,qDAnX2BpV,gCCXtBgb,GAAb,SAAA1K,GAAA,SAAA0K,IAAA,IAAAzK,EAAA/R,EAAAE,OAAAwL,EAAA,EAAAxL,CAAAM,KAAAgc,GAAA,QAAAxK,EAAAC,UAAA/L,OAAAgM,EAAA,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAAF,EAAAE,GAAAH,UAAAG,GAAA,OAAApS,EAAAE,OAAAyL,EAAA,EAAAzL,CAAAM,MAAAuR,EAAA7R,OAAA0L,EAAA,EAAA1L,CAAAsc,IAAA3Q,KAAAwG,MAAAN,EAAA,CAAAvR,MAAAiK,OAAAyH,MACIzS,MAAQ,CACJ0N,MAAM,EACNmN,QAAS,CACLmC,OAAQ,GACR7b,KAAM,KALlBZ,EAiBI0c,YAAc,SAAC3c,GACX,IAAImI,EAAOnI,GAAKA,EAAEkG,OAAOiC,KACzBlI,EAAKqB,SAAS,CAAE8L,MAAM,GAAS,WACxBjF,GAAQlI,EAAK2c,SACZ3c,EAAK2c,QAAQzU,MArB7BlI,EAAA,OAAAE,OAAA8S,EAAA,EAAA9S,CAAAsc,EAAA1K,GAAA5R,OAAA+S,EAAA,EAAA/S,CAAAsc,EAAA,EAAAxX,IAAA,OAAAjC,MAAA,eAAA6Z,EAAA1c,OAAA2c,EAAA,EAAA3c,CAAAmJ,EAAA1J,EAAAmd,KAAA,SAAA7S,EASeqQ,GATf,IAAAtY,EAAAxB,KAAA,OAAA6I,EAAA1J,EAAA2J,KAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAhG,MAAA,cAAAgG,EAAAT,OAAA,SAUe,IAAIC,QAAQ,SAACC,GAChB3H,EAAKX,SAAS,CAAC8L,MAAM,EAAMmN,QAASA,GAAU,WAC1CtY,EAAK2a,QAAUhT,OAZ/B,wBAAAO,EAAAN,SAAAK,MAAA,gBAAA8S,GAAA,OAAAH,EAAAvK,MAAA7R,KAAAyR,YAAA,KAAAjN,IAAA,SAAAjC,MAAA,WA0BQ,OACI3C,EAAAT,EAAAU,cAAC2c,GAAA,EAAD,CAAO7P,KAAM3M,KAAKf,MAAM0N,KAAM8P,OAAQzc,KAAKkc,YAAcQ,gBAAgB,cACrE9c,EAAAT,EAAAU,cAAC2c,GAAA,EAAMG,OAAP,CAAcC,aAAW,GACrBhd,EAAAT,EAAAU,cAACQ,EAAA,EAAD,CAAiBC,KAAMN,KAAKP,MAAMa,MAAQuc,IAAuB5c,UAAU,gBAC3EL,EAAAT,EAAAU,cAAC2c,GAAA,EAAMM,MAAP,KAAc9c,KAAKf,MAAM6a,QAAQmC,SAErCrc,EAAAT,EAAAU,cAAC2c,GAAA,EAAMO,KAAP,KAAa/c,KAAKf,MAAM6a,QAAQ1Z,MAChCR,EAAAT,EAAAU,cAAC2c,GAAA,EAAMQ,OAAP,KACIpd,EAAAT,EAAAU,cAAC6G,EAAA,EAAD,CAAQC,QAAQ,YAAYrH,QAASU,KAAKkc,YAAaxU,KAAK,SAA5D,SAGA9H,EAAAT,EAAAU,cAAC6G,EAAA,EAAD,CAAQC,QAAQ,UAAUrH,QAASU,KAAKkc,YAAaxU,KAAK,UAA1D,gBArCpBsU,EAAA,CAAiChb,aCJZic,4LAEb,OACIrd,EAAAT,EAAAU,cAAA,OAAKmK,GAAG,aACJpK,EAAAT,EAAAU,cAAA,QAAMmK,GAAG,iBAAiBhK,KAAKP,MAAMyd,MACrCtd,EAAAT,EAAAU,cAAA,WACAD,EAAAT,EAAAU,cAAA,QAAMmK,GAAG,kBAAkBhK,KAAKP,MAAM0d,eANlBnc,cCCfoc,4LAGb,OACIxd,EAAAT,EAAAU,cAAA,OAAKI,UAAS,iBAAAgK,OAAmBjK,KAAKP,MAAM4d,OAAQ,sBAAuB,IAAMrT,GAAG,eAChFpK,EAAAT,EAAAU,cAAA,OAAKI,UAAU,kBACfL,EAAAT,EAAAU,cAAA,MAAII,UAAU,kBAAd,mBANqBe,cCY7Bsc,GAAmB,GAENC,eAkEjB,SAAAA,IAAc,IAAA/d,EAAA,OAAAE,OAAAwL,EAAA,EAAAxL,CAAAM,KAAAud,IACV/d,EAAAE,OAAAyL,EAAA,EAAAzL,CAAAM,KAAAN,OAAA0L,EAAA,EAAA1L,CAAA6d,GAAAlS,KAAArL,QAlEJf,MAAQ,CACJue,mBAAmB,EACnBC,cAAc,EACdC,eAAe,EACfC,WAAY,GACZC,SAAS,EACTtT,OAAO,EACPuT,WAAW,GA0DDre,EAxDdoY,OAAS,KAwDKpY,EAvDdse,iBAAmB,EAuDLte,EArDWue,GAAK,KAqDhBve,EApDwByV,MAAQ7V,IAAMC,YAoDtCG,EAnD8Bwe,MAAQ5e,IAAMC,YAmD5CG,EAlD6Bye,KAAO7e,IAAMC,YAkD1CG,EAjD8B0e,MAAQ9e,IAAMC,YAiD5CG,EAhDyB8Z,OAASla,IAAMC,YAgDxCG,EA/C0B2e,QAAU/e,IAAMC,YA+C1CG,EAYd4e,eAAiB,SAACrM,EAAOD,GACrBtS,EAAK6e,YAAY,CACbC,IAAK,OACLvM,QACAD,WAhBMtS,EAoBd+e,kBAAoB,WAChB/e,EAAK6e,YAAY,CACbC,IAAK,MACLE,KAAM,UAvBAhf,EA2Bdif,kBAAoB,SAAC/W,EAAMnF,GACvBd,QAAQC,IAAR,GAAAuI,OAAevC,EAAf,OAAAuC,OAAyB1H,GAAS/C,EAAKyV,OACvCzV,EAAKyV,MAAMnU,QAAQkC,IAAI0E,EAAMnF,IA7BnB/C,EAiCdkf,aAjCc,eAAAC,EAAAjf,OAAA2c,EAAA,EAAA3c,CAAAmJ,EAAA1J,EAAAmd,KAiCC,SAAA7S,EAAOlK,GAAP,IAAAqf,EAAAC,EAAA,OAAAhW,EAAA1J,EAAA2J,KAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAhG,MAAA,cACXjC,QAAQkP,MAAMpR,GACVqf,EAAarf,EAAEmI,MAAQnI,EAAEua,QACzBla,EAAAT,EAAAU,cAAAD,EAAAT,EAAAiJ,SAAA,KACIxI,EAAAT,EAAAU,cAAA,sBAAAoK,OAAc1K,EAAEmI,MAAhB,KACA9H,EAAAT,EAAAU,cAAA,yBAAAoK,OAAiB1K,EAAEua,SAAnB,MAEJva,EAPOmK,EAAAhG,KAAA,EAQKlE,EAAKwe,MAAMld,QAAQ6L,KAC/B,CACIsP,OAAQ,cACR7b,KAAQwe,IAXL,OAQPC,EAROnV,EAAAoV,KAaXrd,QAAQC,IAAImd,GACF,UAAPA,EACCjgB,OAAOC,SAASkgB,SAEhBvf,EAAKqB,SAAS,CAAC+c,SAAS,IAjBjB,wBAAAlU,EAAAN,SAAAK,MAjCD,gBAAA8S,GAAA,OAAAoC,EAAA9M,MAAA7R,KAAAyR,YAAA,GAAAjS,EAqDdwf,eAAiB,SAACnB,GACdpc,QAAQC,IAAI,iBACZlC,EAAKqB,SAAS,CAAC+c,SAAS,EAAOC,cAC/Bre,EAAKyf,qBACFzf,EAAK0f,iBAER1f,EAAK0f,eAAiBC,YAAY,WAC9B3f,EAAKqB,SAAS,CAAC8c,WAAYne,EAAKyV,MAAMnU,QAAQwY,YAC/C,OA7DO9Z,EAgEd4f,YAAc,SAACC,GACX7f,EAAKqB,SAAS,CAACye,YAAaD,EAAEE,QAAQ,MAjE5B/f,EAoEdggB,YAAc,SAACtI,EAAMC,GACjB3X,EAAK6e,YAAY,CACbC,IAAK,aACLpY,MAAOgR,EACPhL,OAAQiL,IAEZ3X,EAAKyf,sBA1EKzf,EAoFdigB,SAAW,WACPjgB,EAAKyV,MAAMnU,QAAQsW,KAAK,IACxB5X,EAAKyf,sBAtFKzf,EAyFdkgB,UAAY,WACRlgB,EAAKyV,MAAMnU,QAAQsW,MAAM,IACzB5X,EAAKyf,sBA3FKzf,EA8FdiY,aAAe,SAACtV,GACZV,QAAQC,IAAIS,GACZ,IAAI+P,EAAS,CACTvH,KAAM,CAAC,IAAK2S,IACZnL,MAAO,CAAC,KAAMmL,IACdlL,KAAM,CAAC,IAAKkL,IACZjL,GAAI,CAAC,KAAMiL,KANGhL,EAAA5S,OAAAoE,EAAA,EAAApE,CAQEwS,EAAO/P,GART,GAQbwd,EARarN,EAAA,GAQNsN,EARMtN,EAAA,GASlB9S,EAAK6e,YAAY,CACbC,IAAK,OACLqB,QACAC,UA1GMpgB,EA8GdqgB,oBAAsB,WAClBpe,QAAQC,IAAI,wBACZlC,EAAK6e,YAAY,CACbC,IAAK,MACLE,KAAM,UAlHAhf,EAsHdsgB,qBAAuB,SAACH,EAAOC,GAC3Bne,QAAQC,IAAIie,EAAOC,GACnBpgB,EAAK6e,YAAY,CACbC,IAAK,OACLqB,QACAC,UA3HMpgB,EA+HdgL,OAAS,SAAC5J,GACNpB,EAAKqB,SAAS,CAACyJ,OAAQ9K,EAAKP,MAAMqL,SA9HlC9K,EAAKugB,cAAcjY,KAAK,kBAAMtI,EAAKwgB,oBAFzBxgB,iFA7CI,IAAAgC,EAAAxB,KACd,GAAIA,KAAKf,MAAM2Y,OAAOqI,SAAtB,CAIyB,IAAIlC,EAAK,KAClC,IACItc,QAAQC,IAAI,0BACZ1B,KAAK8d,iBAAmB,EACrB9d,KAAKf,MAAM2Y,OAAOqI,WACjBlC,EAAK,IAAImC,UAAUlgB,KAAKf,MAAM2Y,OAAOqI,WAC3C,MAAM1gB,GAMJ,OALAkC,QAAQC,IAAI,6BAA8BnC,QACtCS,KAAK8d,iBAGLrc,QAAQC,IAAI,2BAFZ1B,KAAK8d,iBAAmB1Y,WAAW,kBAAM5D,EAAKwe,mBAtCpC,MA2CdjC,IAGJA,EAAGoC,OAAS,WACR1e,QAAQC,IAAI,uBACZF,EAAKuc,GAAKA,EACVvc,EAAKuc,GAAGlE,KAAKpX,KAAKmF,UAAU,CAAC0W,IAAK,WAClC9c,EAAKX,SAAS,CAAC2c,mBAAmB,KAEtCO,EAAG7E,UAAY,SAACC,GACZ1X,QAAQC,IAAIyX,IAEhB4E,EAAGqC,QAAU,SAACC,KAGdtC,EAAGuC,QAAU,WACT9e,EAAKuc,GAAK,KACVvc,EAAKX,SAAS,CAAC2c,mBAAmB,IAClC/b,QAAQC,IAAI,yBACRF,EAAKsc,iBAGLrc,QAAQC,IAAI,2BAFZF,EAAKsc,iBAAmB1Y,WAAW,kBAAM5D,EAAKwe,mBA/DpC,YA0BdhgB,KAAKa,SAAS,CAAC2c,mBAAmB,yDAgD9Bc,GACLte,KAAK+d,KACJO,EAAIiC,UAAYC,KAAKC,MACrBzgB,KAAK+d,GAAGlE,KAAKpX,KAAKmF,UAAU0W,kDAsEhCte,KAAKa,SAAS,CACV6c,cAAe1d,KAAKiV,MAAMnU,QAAQ8T,OAAS,EAC3C6I,cAAc,8KAoDG3b,MAAM,iCAAvB4e,kBACaA,EAASC,cAAtBC,SACAC,EAAMD,EACVnf,QAAQC,IAAImf,IACRjJ,EAASiJ,GACNhJ,MAAQgJ,EAAIhJ,OAASgJ,EAAIhJ,MAAMiJ,QAAQ,UAAWhW,SAASjM,SAASkiB,MAC3EnJ,EAAOqI,SAAWY,EAAIZ,UAAYY,EAAIZ,SAASa,QAAQ,UAAWhW,SAASjM,SAASkiB,MACpF/gB,KAAKa,SAAS,CAAC+W,+IAGV,IAAAoJ,EACL,OAAQphB,EAAAT,EAAAU,cAAAD,EAAAT,EAAAiJ,SAAA,KACJxI,EAAAT,EAAAU,cAACohB,GAAD,CAASlhB,IAAKC,KAAKme,QAASd,QAASrd,KAAKf,MAAM2e,UAC9C5d,KAAKf,MAAM2Y,QAAUhY,EAAAT,EAAAU,cAACqhB,IAADF,EAAA,CACCjhB,IAAKC,KAAKiV,MACV2C,OAAQ5X,KAAKf,MAAM2Y,OACnB3B,UAAWjW,KAAKgf,eAChB1G,QAAStY,KAAK0e,aACdpH,SAAUtX,KAAKwf,YACf/H,aAAczX,KAAKyX,cANpB/X,OAAAsN,EAAA,EAAAtN,CAAAshB,EAAA,WAOWhhB,KAAKwf,aAPhB9f,OAAAsN,EAAA,EAAAtN,CAAAshB,EAAA,SAQShhB,KAAKof,aARd1f,OAAAsN,EAAA,EAAAtN,CAAAshB,EAAA,QASQhhB,KAAKf,MAAMqL,OATnB0W,KAUpBhhB,KAAKf,MAAM2e,SAAW5d,KAAKf,MAAM4e,WAAcje,EAAAT,EAAAU,cAACshB,EAAD,CAAW3W,OAAQxK,KAAKwK,OAAQF,MAAOtK,KAAKf,MAAMqL,QACpG1K,EAAAT,EAAAU,cAACuhB,EAAD,MACEphB,KAAKf,MAAMue,mBAAqB5d,EAAAT,EAAAU,cAACwhB,EAAD,CACEzQ,OAAQ5Q,KAAKoe,eACbpP,MAAOhP,KAAKue,oBAC9Cve,KAAKf,MAAMue,mBAAqB5d,EAAAT,EAAAU,cAACyhB,EAAD,CACEtS,MAAOhP,KAAK6f,oBACZjP,OAAQ5Q,KAAK8f,uBACjDlgB,EAAAT,EAAAU,cAAC0hB,EAAD,CAAgB9a,SAAUzG,KAAKye,oBAC/B7e,EAAAT,EAAAU,cAAC2hB,EAAD,CAAaliB,QAASU,KAAKyf,SAAU1f,IAAKC,KAAKie,KAAMrX,SAAU5G,KAAKf,MAAMwe,eAC1E7d,EAAAT,EAAAU,cAAC4hB,EAAD,CAAaniB,QAASU,KAAK0f,UAAW3f,IAAKC,KAAKke,MAAOtX,SAAU5G,KAAKf,MAAMye,gBAC5E9d,EAAAT,EAAAU,cAAC6hB,GAAD,CAAa3hB,IAAKC,KAAKge,QACvBpe,EAAAT,EAAAU,cAAC8hB,GAAD,CAAQ5hB,IAAKC,KAAKsZ,OAAQ4D,KAAMld,KAAKf,MAAM0e,WAAYR,MAAOnd,KAAKf,MAAMqgB,sBAzO5Cte,aCVpB4gB,8MACjB3iB,MAAQ,CACJ4iB,WAAW,KAGf5a,QAAU,WACNzH,EAAKqB,SAAS,CAACghB,WAAW,6EAI1B,OAAG7hB,KAAKf,MAAM4iB,WACV/W,SAASgX,qBAAqB,QAAQ,GAAGC,UAAUC,OAAO,mBAAmB,GAC7ElX,SAASmX,eAAe,QAAQF,UAAUC,OAAO,cAAc,GAC/DlX,SAAS9I,KAAKgK,iBAAiB,YAAa,SAACzM,GAAD,OAAOA,EAAEsG,kBAAkB,CAAEqc,SAAS,IAC3EtiB,EAAAT,EAAAU,cAACsiB,GAAD,OAEAviB,EAAAT,EAAAU,cAACuiB,EAAD,CAAenb,QAASjH,KAAKiH,iBAhBfjG,aCUjCqhB,IAASC,OAAO1iB,EAAAT,EAAAU,cAAC0iB,GAAD,MAASzX,SAASmX,eAAe,Sf+G3C,kBAAmBzH,WACrBA,UAAUgI,cAAcC,MAAM3a,KAAK,SAAA4a,GACjCA,EAAaC","file":"static/js/main.b38dc18d.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import './ConnectWizard.css';\n\nimport React, { Component } from 'react';\nimport { Collapse, Fade, Button } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faLock, faLockOpen, faSignal, faUnlock, faWifi } from '@fortawesome/free-solid-svg-icons'\nimport cn from 'classnames';\n\nconst MOBILE = ('ontouchstart' in window );\n\n\nclass ListItem extends Component {\n  static defaultProps = {\n    bars: \"5\"\n  }\n  state = {\n    active: false\n  }\n  a = React.createRef();\n\n  onClick = (e) => {\n    this.props.onClick && this.props.onClick(this, e);\n  }\n  \n  render() {\n    return (\n      <a href=\"#\" \n        ref={this.a}\n        className={cn(\"list-group-item\", \"list-group-item-action\", \n                      {\"active\": this.state.active})}\n        onClick={this.props.onClick && this.props.onClick.bind(this, this)}>\n          <div className=\"d-flex my-bg-inherit\">\n            <div className=\"p-2 flex-grow-1\">{this.props.text}</div>\n            <div className=\"p-2\"><FontAwesomeIcon icon={this.props.locked? faLock: faUnlock } /></div>\n            <div className=\"p-2 my-bg-inherit\">\n              <FontAwesomeIcon icon={faSignal} />\n              <div className={\"mystencil my-bg-inherit mystencil-\"+this.props.bars} />\n            </div>\n          </div>\n      </a>\n    );\n  }\n\n  activate(b) {\n    this.setState({active: b});\n  }\n\n  scroll() {\n    this.a.current.scrollIntoView();\n  }\n\n  get value() {\n    return this.props.text;\n  }\n\n  get locked() {\n    return this.props.locked;\n  }\n}\n\nclass List extends Component {\n  state = {\n    compact: false,\n    items: []\n  }\n  selected = null;\n\n  async fetchNetworks() {\n    let r = await fetch('https://192.168.42.1/networks');  \n    let d = await r.body.getReader().read();\n    let v = new TextDecoder(\"utf-8\").decode(d.value);\n    let networks = JSON.parse(v), items=new Map, items_list = [];\n    for(let n of networks) {\n        if(items.has(n.ssid) || !n.ssid)\n            continue;\n        items.set(n.ssid, {locked: n.security!='none', bars: Math.ceil(n.strength/20)});\n    }\n    for(let kv of items) {\n        let [k, v] = kv;\n        items_list.push({text: k, ...v});\n    }\n    this.setState({items: items_list});\n  }  \n\n  componentDidMount() {\n    this.fetchNetworks();\n  }\n\n  onItemClick = (el, e) => {\n    if(this.state.compact)\n      return;\n\n    console.log(e.currentTarget, el);\n\n    el.activate(true);\n    this.selected = el;\n    this.setState({compact: true}, () => {\n      this.props.onSelect();\n      // el.scroll();\n    })\n  }\n\n  scroll() {\n    this.selected.scroll();\n  }\n\n  reset() {\n    this.setState({compact: false});\n    this.selected.activate(false);\n  }\n\n  render() {\n    return (\n      <div className={cn(\"list-group\", \"rounded\", \"border\", \"mylistgroup\",\n                      )}>\n        {this.state.items.map((i) => <ListItem text={i.text} locked={i.locked} bars={i.bars} key={i.text} onClick={this.onItemClick}/>)}\n      </div>\n    )\n  }\n\n  get selectedName() {\n    return this.selected.value;\n  }\n\n  get selectedNeedsPassword() {\n    return this.selected.locked;\n  }\n}\n\nclass WifiWizard extends Component {\n  static defaultState = {\n    valid: false,\n    showPasswordField: false,\n    compact: false,\n    headerText: \"Choose network\",\n    password: \"\"\n  }\n  state = WifiWizard.defaultState;\n  static defaultProps = {\n    className: \"\"\n  }\n  list = React.createRef();\n  passwordField = React.createRef();\n  passwordDiv = React.createRef();\n  wrapper = React.createRef();\n\n  onSelect = () => {\n    this.setState({\n      showPasswordField: this.list.current.selectedNeedsPassword,\n      valid: !this.list.current.selectedNeedsPassword,\n      compact: true,\n      headerText: \"Enter password\"}, \n      () => {\n        setTimeout(() => {\n          this.passwordField.current.select();\n          this.list.current.scroll();\n        }, 0);\n        \n        // this.passwordDiv.current.scrollIntoView(true);\n    });\n  }\n\n  onBack = () => {\n    if(this.state.compact) {\n      this.setState(WifiWizard.defaultState);\n      this.list.current.reset();\n    } else {\n      this.props.onBack();\n    }\n  }\n\n  onPasswordChange = (e) => {\n    console.log(e.target.value.length);\n    this.setState({\n      valid: e.target.value.length >= 8,\n      password: e.target.value\n    });\n  }\n\n  onSubimt = (e) => {\n    e.preventDefault();\n    if(this.state.valid)\n      this.props.onSubmit(this.list.current.selectedName, this.state.password);\n  }\n\n  render() {\n    return (\n      <div className={cn(\n        \"mylist d-flex flex-column border rounded shadow mx-auto  p-3 mb-5 bg-white\", \n        this.props.className,\n        {\"mylist-compact\": this.state.compact})}>\n        <nav className=\"navbar navbar-dark bg-secondary flex-shrink-0\">\n          <span className=\"navbar-brand\" style={{width: '100%'}}>\n            <div className=\"d-flex\">\n              <div className=\"p-2 flex-grow-1 bd-highlight\">\n                {this.state.headerText}\n              </div>\n              <div className=\"p-2 bd-highlight\">\n                <FontAwesomeIcon icon={faWifi} />\n              </div>\n            </div>\n          </span>\n        </nav>\n        <List \n          onSelect={this.onSelect} \n          className=\"flex-shrink-1\"\n          ref={this.list}/>\n        <Collapse in={this.state.showPasswordField}>\n          <form ref={this.passwordDiv} className={cn(\"flex-shrink-0\", \"form-group\", \"my-1\", \"fade\", {\n            // \"show\": this.state.showPasswordField,\n            // \"mypasswordfield\": !this.state.showPasswordField\n          })} onSubmit={this.onSubimt}>\n            <input type=\"password\" \n                  className=\"form-control\" \n                  placeholder=\"Password\"\n                  onChange={this.onPasswordChange}\n                  value={this.state.password}\n                  ref={this.passwordField} />\n            {/* <input type=\"submit\" style={{visibility: 'hidden'}}/> */}\n          </form>\n        </Collapse>\n        <div className=\"d-flex flex-shrink-0 justify-content-end my-3\">\n          <Button type=\"submit\" variant=\"secondary\" className=\"mx-2\" onClick={this.onBack}>\n            Back\n          </Button>\n          <Button type=\"submit\" variant={this.state.compact? \"primary\": \"secondary\"} onClick={this.onSubimt} disabled={this.state.valid? false: true}>\n            Connect\n          </Button>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass Success extends Component {\n  render() {\n    return (\n      <div className={cn(\n        \"mylist d-flex flex-column border rounded shadow mx-auto  p-3 mb-5 bg-white mylist-compact\", \n        this.props.className)}>\n        <div className=\"alert alert-success\" role=\"alert\">\n          <h4 className=\"alert-heading\">Done</h4>\n          <p>Raspberry Pi is trying to connect to the chosen WiFi network now.</p>\n          <hr />\n          <p className=\"mb-0\">If it fails to do so, this page will be available again soon.</p>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass Start extends Component {\n  render() {\n    return(\n      <div className={cn(\n        \"mylist border rounded shadow mx-auto  p-3 mb-5 bg-white mylist-compact\", \n        this.props.className)}>\n        <div className=\"jumbotron\">\n          <h1 className=\"display-5\">Pi Robot</h1>\n          <p className=\"lead\">Chooose what to do now:</p>\n          <hr className=\"my-3\" />\n          <p>Try to connect to a WiFi network.</p>\n          <Button variant=\"primary\" size=\"lg\" onClick={this.props.onSubmit}>Connect!</Button>\n          <hr className=\"my-3\" />\n          <p>Launch the driving interface.</p>\n          <Button variant=\"primary\" size=\"lg\" onClick={this.props.onDrive}>Drive!</Button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class ConnectWizard extends Component {\n  state = {\n    successVisible: false,\n    successCollapsed: false,\n    wifiWizardVisible: false,\n    wifiWizardCollapsed: false,\n    startVisible: true,\n    startCollapsed: false,\n    next: 'wifiwizard'\n  }\n\n  onWifiSubmit = (name, passphrase) => {\n    console.log(name, passphrase);\n    let d = JSON.stringify({name, passphrase});\n    fetch('https://192.168.42.1/connect', {method: \"POST\", body: d}).then(() => {\n        this.setState({\n            wifiWizardCollapsed: true\n          });\n    });\n    \n  }\n\n  onWifiBack = () => {\n    this.setState({\n      wifiWizardCollapsed: true,\n      next: 'start'\n    });\n  }\n\n  onWifiWizardHidden = (e) => {\n    console.log(e);\n    if(this.state.next == 'wifiwizard')\n      this.setState({\n        wifiWizardVisible: false,\n        successVisible: true,\n        next: 'success'\n      });\n    else {\n      this.setState({\n        wifiWizardVisible: false,\n        startVisible: true,\n        startCollapsed: false,\n        next: 'wifiwizard'\n      });\n    }\n  }\n\n  onStartSubmit = (e) => {\n    this.setState({\n      startCollapsed: true\n    })\n  }\n\n  onStartHidden = (e) => {\n    this.setState({\n      startVisible: false,\n      wifiWizardCollapsed: false,\n      wifiWizardVisible: true\n    });\n  }\n\n  render() {\n    return (\n      <>\n      {this.state.startVisible && \n      <Fade appear in={!this.state.startCollapsed} onExited={this.onStartHidden}>\n        <Start onSubmit={this.onStartSubmit} onDrive={this.props.onDrive} />\n      </Fade> }\n      {this.state.successVisible && \n      <Fade appear in={!this.state.successCollapsed}>\n        <Success />\n      </Fade> }\n      { this.state.wifiWizardVisible &&\n      <Fade appear in={!this.state.wifiWizardCollapsed} onExited={this.onWifiWizardHidden}>\n        <WifiWizard onSubmit={this.onWifiSubmit} onBack={this.onWifiBack} />\n      </Fade> }\n      </>\n    )\n  }\n}\n","import './Button.css';\n\nimport React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCoffee } from '@fortawesome/free-solid-svg-icons'\n\n\nasync function requestAnimationFrame() {\n  return new Promise((resolve) => {\n    window.requestAnimationFrame(resolve);\n  })\n}\n\nconst MOBILE = ('ontouchstart' in window );\n\nexport default class Button extends Component {\n  state = {animationName: ''};\n\n  setStateAsync(state) {\n    return new Promise((resolve) => {\n      this.setState(state, resolve)\n    });\n  }\n\n  onClick = (e) => {\n    console.log('onClick');\n    this.onTouchStart(e);\n  }\n\n  onTouchStart = async (e) => {\n    console.log('onTouchStart');\n    this.props.onClick(e);\n    \n    await this.setStateAsync({animationName: ''});\n    await requestAnimationFrame();\n    await requestAnimationFrame();\n    await this.setStateAsync({animationName: 'animated'});\n  }\n\n  onTouchEnd = (e) => {\n    console.log('onTouchEnd');\n    if(this.props.embed)\n      e.preventDefault();\n  }\n\n  render() {\n    let onTouchStart, onTouchEnd, onClick;\n    \n    if(!this.props.canTouch) {\n      [onTouchStart, onTouchEnd] = [this.onTouchStart, this.onTouchEnd];\n    }\n    if(this.props.canTouch || !MOBILE)\n      onClick = this.onClick;\n\n    return (\n      <div className={this.props.embed? \"\": \"inline-div\"}\n          id={this.props.id}\n          style={ {...this.props.style} } >\n        <div className=\"flex-div\">\n            <button \n              className={`flex-a flex-animated ${this.props.disabled? \"toolButton-disabled\": \"\" }`}\n              onTouchStart={onTouchStart}\n              onTouchEnd={onTouchEnd}\n              onClick={onClick}\n              style={ {animationName: this.state.animationName, ...this.props.buttonStyle} }>\n                <FontAwesomeIcon icon={this.props.icon || faCoffee} />\n            </button>\n        </div>\n      </div>\n    );\n  }\n}\n\n","import React, { Component } from 'react';\nimport Button from './Button'\nimport { faMicrophoneAlt, faMicrophoneAltSlash } from '@fortawesome/free-solid-svg-icons';\n\n\nexport default class MicButton extends Component {\n  state = {icon: faMicrophoneAlt, muted: false};\n\n  componentDidMount() {\n    this.setState({muted: this.props.muted});\n  }\n\n  buttonClick = (e) => {\n    console.log('[Mic] button clicked');      \n    this.setState({muted: !this.state.muted}, () => {\n      this.props.onMute(this.state.muted);\n    });\n  }\n\n  render() {\n    return ( <Button id=\"mic-button-div\"\n                style={{\n                  top: 'calc(90% - 3rem)',\n                  left: 'calc(95% - 3rem)'\n                }}\n                icon={this.state.muted? faMicrophoneAltSlash: faMicrophoneAlt}\n                onClick={this.buttonClick}> \n              </Button> );\n  }\n}\n\n","import React, { Component } from 'react';\nimport Button from './Button'\nimport { faCompress, faExpand } from '@fortawesome/free-solid-svg-icons'\n\nfunction fullscreen(fs) {\n  if(fs) {\n    let e = document.documentElement;\n    (e.mozRequestFullScreen && e.mozRequestFullScreen()) ||\n    (e.webkitRequestFullScreen && e.webkitRequestFullScreen());\n  } else {\n      (document.webkitCancelFullScreen && document.webkitCancelFullScreen()) ||\n      (document.mozCancelFullScreen && document.mozCancelFullScreen());\n  }\n}\nfunction isFullscreen() {\n  return !!(document.webkitFullscreenElement || document.mozFullScreenElement);\n}\n\nexport default class FullscreenButton extends Component {\n  state = {icon: faExpand};\n\n  constructor() {\n    super();\n    document.addEventListener(\"webkitfullscreenchange\", this.onFullscreen);\n    document.addEventListener(\"mozfullscreenchange\", this.onFullscreen);\n  }\n\n  onFullscreen = () => {\n    console.log('fullscreen');\n    let fs = isFullscreen();\n    this.setState({icon: fs? faCompress: faExpand});\n  }\n\n  buttonClick = (e) => {\n    console.log('[Fullscreen] button clicked');\n    fullscreen(!isFullscreen());\n  }\n\n  render() {\n    return ( <Button canTouch\n                style={{\n                  top: '10%',\n                  left: '5%'\n                }}\n                icon={this.state.icon}\n                onClick={this.buttonClick} \n                id=\"fullscreen-button-div\" > \n              </Button> );\n  }\n}\n","import React, { Component } from 'react';\nimport Button from './Button'\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons';\n\n\nclass ZoomButton extends Component {\n    onClick = (e) => {\n      if(this.props.disabled)\n        return;\n      this.props.onClick(e);\n    }\n\n    render() {\n      return ( <Button disabled={this.props.disabled}\n                  style={this.props.style}\n                  buttonStyle={{\n                    width: '2rem',\n                    height: '2rem',\n                    fontSize: '1rem'\n                  }}\n                  icon={this.props.icon}\n                  onClick={this.onClick} \n                  id={this.props.id}> \n                </Button> );\n    }\n  }\n\nclass PlusButton extends ZoomButton {\n    render() {\n        return ( <ZoomButton disabled={this.props.disabled}\n                    style={{\n                      top: 'calc(10% - .5rem)',\n                      left: 'calc(95% - 3rem)'\n                    }}\n                    icon={faPlus}\n                    onClick={this.props.onClick} \n                    id=\"plus-button-div\"> \n                  </ZoomButton> );\n      }\n}\n\nclass MinusButton extends Component {\n    render() {\n        return ( <ZoomButton disabled={this.props.disabled}\n                    style={{\n                      top: 'calc(10% + 2rem)',\n                      left: 'calc(95% - 3rem)'\n                    }}\n                    icon={faMinus}\n                    onClick={this.props.onClick} \n                    id=\"minus-button-div\"> \n                  </ZoomButton> );\n      }\n}\n\nexport { PlusButton, MinusButton };\n","import './Settings.css'\nimport React, { Component } from 'react';\nimport {Dropdown, Form} from 'react-bootstrap';\nimport Button from './Button'\nimport { faCog } from '@fortawesome/free-solid-svg-icons'\n\n\nexport default class SettingsDropdown extends Component {\n    /** @type {React.RefObject<HTMLDivElement>} */ dd = React.createRef();\n  state = {show: false, fit_mode: 'fill', quality: 'quality_hi'}\n\n  \n  settingsChanged = (e) => {\n    const {name, value} = e.target;\n    console.log('[Settings] changed', name, value, this.state);\n    this.props.onChange(name, value);\n    this.setState({[name]: value});\n  }\n\n  render() {\n    return ( \n      <Dropdown drop=\"up\" style={{\n          position: 'fixed',\n          top: 'calc(90% - 3rem)',\n          left: '5%'\n      }}>\n          <Dropdown.Toggle as={Button} icon={faCog} embed></Dropdown.Toggle>\n  \n          <Dropdown.Menu>\n            <Form className=\"px-1 py-4\">\n              {/* <Form.Row> */}\n                <Form.Group>\n                    <Form.Label>Fit mode</Form.Label>\n                    <Form.Control as=\"select\" \n                      name=\"fit_mode\"\n                      onChange={this.settingsChanged}\n                      value={this.state.fit_mode}>\n                        <option value=\"fill\">Fill</option>\n                        <option value=\"fit_both\">Fit</option>\n                        <option value=\"fit_width\">Fit Width</option>\n                        <option value=\"fit_height\">Fit Height</option>\n                      </Form.Control>\n                </Form.Group>\n              {/* </Form.Row> */}\n              {/* <Form.Row> */}\n                <Form.Group>\n                    <Form.Label>Quality</Form.Label>\n                    <Form.Control as=\"select\"\n                      name=\"quality\"\n                      value={this.state.quality}\n                      onChange={this.settingsChanged}>\n                        <option value=\"quality_low\">Low</option>\n                        <option value=\"quality_med\">Medium</option>\n                        <option value=\"quality_hi\">High</option>\n                    </Form.Control>\n                </Form.Group>\n              {/* </Form.Row> */}\n            </Form>\n          </Dropdown.Menu>\n        </Dropdown>);\n  }\n}\n","import './JoystickBase.css'\nimport React, { Component } from 'react';\n\n\nconst R = 50, R2 = R/2, \n    initialTransform=`translateX(${R2}px) translateY(${R2}px)`,\n    directions = {0: 'up', 1: 'right', 2: 'down', 3: 'left'};\n\nexport default class Joystick extends Component {\n    wrapperRef = React.createRef();\n    innerRef = React.createRef();\n    outerRef = React.createRef();\n    state = {\n        outerPressed: false,\n        innerTransform: initialTransform\n    }\n\n    onMouseDown = (e) => {\n        console.log(e);\n    }\n\n    onOuterDown = (e) => {\n        console.log('onOuterDown');\n        e.preventDefault();\n        this.setState({outerPressed: true});\n        this.onWrapperMove(e, true);\n    }\n\n    onOuterTouch = (e) => {\n        console.log('onOuterTouch');\n        console.log(e.touches, e.targetTouches);\n        this.setState({outerPressed: true});\n        this.onWrapperMove(e, true);\n    }\n\n    onWrapperUp = (e) => {\n        if(!this.state.outerPressed)\n            return;\n\n        console.log('onWrapperUp');\n        this.setState({\n            outerPressed: false,\n            innerTransform: initialTransform\n        });\n        this.props.onEnd && this.props.onEnd();\n    }\n\n    onWrapperMove = (e, b) => {\n        if(!(b || this.state.outerPressed))\n            return;\n\n        e.preventDefault();\n\n        let ev = e.nativeEvent, el = e.target;\n\n        let x = ev.targetTouches? ev.targetTouches[0].pageX: ev.pageX,\n            y = ev.targetTouches? ev.targetTouches[0].pageY: ev.pageY;\n        if(ev.targetTouches) {\n            // console.log(ev.targetTouches[0].radiusX, ev.targetTouches[0].radiusY);\n            y -= ev.targetTouches[0].radiusY/2;\n        }\n        this.move(x, y);\n    }\n\n    move(x, y) {\n        let r = this.outerRef.current.getBoundingClientRect(),\n            ix = r.x, iy = r.y;\n        let dx=x-R2-ix, dy=y-R2-iy;\n        // console.log(x, y, dx, dy);\n\n        let outerCenter = {x: r.x + r.width/2, y: r.y + r.height/2},\n            innerCenter = {x: x, y: y},\n            distance = Math.sqrt(Math.pow(outerCenter.x-innerCenter.x, 2)+\n                                Math.pow(outerCenter.y-innerCenter.y, 2));\n        let a = Math.acos((outerCenter.x-innerCenter.x)/distance),\n            ddd = a*180./Math.PI, nx, ny;\n        if(outerCenter.y-innerCenter.y < 0) {\n            ddd = 360 - ddd;\n            nx = Math.cos(Math.PI-a)*R+R2;\n            ny = Math.sin(a)*R+R2;\n        } else {\n            nx = Math.cos(Math.PI-a)*R+R2;\n            ny = Math.sin(-a)*R+R2;\n        }\n        ddd = (ddd+270)%360;\n        let dir = (Math.floor((ddd-45.)/90.)+1)%4;\n        console.log(distance/R, ddd, dir);\n        if(distance > R)\n            [dx, dy] = [nx, ny];\n\n        this.setState({innerTransform: `translateX(${dx}px) translateY(${dy}px)`})\n        if(!directions[dir])\n            console.error('invalid dir: '+dir);\n        this.props.onMove && this.props.onMove(ddd, distance/R, directions[dir]);\n    }\n\n    onWrapperOut = (e) => {\n        if(e.target == this.wrapperRef.current) {\n            console.log('onWrapperOut', e.target);\n            this.onWrapperUp(e);\n        }\n    }\n\n    render() {\n        return (\n            <div className={\"joystick-wrapper fullscreen\"}\n                onMouseMove={this.onWrapperMove}\n                onMouseUp={this.onWrapperUp}\n                onMouseLeave={this.onWrapperOut}\n                onTouchMove={this.onWrapperMove}\n                onTouchEnd={this.onWrapperUp}\n                ref={this.wrapperRef}\n                style={{\n                    visibility: this.state.outerPressed? 'visible': 'hidden',\n                    cursor: this.state.outerPressed? 'grabbing': 'auto',\n                    // zIndex: this.state.outerPressed? 999: 'unset',\n                }}\n                >\n\n                <div className={`joystick-outer ${this.state.outerPressed? \"joystick-active\": \"\"} ${this.props.className}`}\n                    onMouseDown={this.onOuterDown}\n                    onTouchStart={this.onOuterTouch}\n                    ref={this.outerRef}\n                    style={{\n                        cursor: this.state.outerPressed? 'grabbing': 'grab'\n                    }}>\n                    <div className=\"joystick-inner\"\n                        ref={this.innerRef}\n                        style={{\n                            transform: this.state.innerTransform\n                        }}\n                    >\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}","import './Joystick.css'\nimport React, { Component } from 'react';\nimport Joystick from './JoystickBase'\n\n\nconst smoothK = 4.0;\n\nexport class CameraJoystick extends Component {\n    angle = null;\n    force = null;\n    tm = null;\n\n    move() {\n        console.log(this.angle, this.force);\n        this.props.onMove(this.angle, this.force);\n    }\n    onMove = (a, f, d) => {\n        if(!d)\n            return console.error('direction is invalid');\n            \n        let plains = {\n            left: ['h', f],\n            right: ['h', -f],\n            down: ['v', f],\n            up: ['v', -f]\n        }\n\n        let [angle, force] = plains[d];\n        this.angle = angle; this.force = force;\n        this.move();        \n    }\n\n    onEnd = () => {\n        if(this.tm) {\n            clearInterval(this.tm);\n            this.tm = null;\n        }\n        this.props.onEnd();\n    }\n\n    render() {\n        return (\n            <Joystick onEnd={this.onEnd} \n                      onMove={this.onMove}\n                      className=\"right-joystick\" />\n        )\n    }\n}\n\nexport class EngineJoystick extends Component {\n    step_left = null;\n    step_right = null;\n\n    smoothAngle(a, k) {\n        return Math.expm1(a/(10.*k))/Math.expm1(9/k)\n    }\n\n    onMove = (a, force) => {\n        let f = force;\n        if(f > 1.0)\n            f = 1.0;\n\n        let smoothA = 0;\n        if(a < 90.0) {\n            smoothA = 90.0*this.smoothAngle(a, smoothK);\n            // console.log(`${a} -> ${smoothA} (0-90)`);\n        } else if(a >= 90.0 && a < 180.0) {\n            smoothA = 90+90.0*(1.0-this.smoothAngle(180-a, smoothK));\n            // console.log(`${a} -> ${smoothA} (90-180)`);\n        } else if(a >= 180.0 && a < 270.0) {\n            smoothA = 180+90.0*this.smoothAngle(a-180, smoothK);\n            // console.log(`${a} -> ${smoothA} (180-270)`);\n        } else if(a >= 270.0 && a < 360.0) {\n            smoothA = 270+90.0*(1.0-this.smoothAngle(360-a, smoothK));\n            // console.log(`${a} -> ${smoothA} (270-360)`);\n        }\n    \n        console.log('smoothA:', smoothA);\n        this.props.onMove(f, smoothA)\n    }\n\n    onEnd = () => {        \n        this.props.onEnd();\n    }\n\n    render() {\n        return (\n            <Joystick onMove={this.onMove} \n                      onEnd={this.onEnd} \n                      className=\"left-joystick\" />\n        );\n    }\n}","import './Video.css'\nimport React, { Component } from 'react';\nimport adapter from 'webrtc-adapter';\nimport Janus from '@a-martynovich/janus-gateway'\n\n\nconst STREAM_ID = 1;\nconst RESIZE_TIMEOUT = 1000;\nconst DW = 4, DH = 3, MAXW = 1640, MAXH = 1230, MINW = 48, MINH = 36;\nconst KEYS = {\n    KeyA: 'left',\n    KeyD: 'right',\n    KeyS: 'down',\n    KeyW: 'up'\n};\nconst QUALITY={quality_low: 0.3, quality_med: 0.5, quality_hi: 1};\nconst MOBILE = ('ontouchstart' in window );\n\nexport default class Video extends Component {\n    state = {fit_width: false, fit_height: true};\n\n    haveAudio = undefined;\n    fitMode = 'fill';\n    quality = 1.0;\n    resizeTm = 0;\n    scale = 1.0;\n    tX=0; tY=0; X=0; Y=0;\n\n    /** @type {React.RefObject<HTMLVideoElement>} */video = React.createRef();\n\n    /** @param {React.SyntheticEvent} e */\n    touchDown = (e) => {\n        if(MOBILE) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        let ev = e.nativeEvent;\n\n        let x = ev.touches? ev.touches[0].pageX: ev.pageX,\n            y = ev.touches? ev.touches[0].pageY: ev.pageY;\n        this.X = x - this.tX;\n        this.Y = y - this.tY;\n\n    }\n\n    /** @param {React.SyntheticEvent} e */\n    touchMove = (e) => {\n        if(MOBILE) {\n            e.preventDefault();            \n            e.stopPropagation();\n        }\n\n        let ev = e.nativeEvent, el = e.target;\n        if(!((ev.type == 'mousemove' && ev.buttons == 1) || ev.type == 'touchmove'))\n            return;\n\n        e.preventDefault();\n        let x = ev.touches? ev.touches[0].pageX: ev.pageX,\n            y = ev.touches? ev.touches[0].pageY: ev.pageY,\n            dx = x - this.X, dy = y - this.Y;\n        console.debug(el, dx);\t\n\n        let rect = this.video.current.getBoundingClientRect(),\n            W = document.documentElement.clientWidth,\n            H = document.documentElement.clientHeight;\n\n        let maxX = (rect.width-W)/2;\n        let maxY = (rect.height-H)/2;\n        if(maxX >= 0) {\n            if(dx > 0 && dx > maxX)\n                dx = maxX;\t\t\n            else if(dx < 0 && dx < -maxX)\n                dx = -maxX;\n        }\n        if(maxY >= 0) {\n            if(dy > 0 && dy > maxY)\n                dy = maxY;\n            else if(dy < 0 && dy < -maxY)\n                dy = -maxY;\n        }\n        if(maxX >= 0 && maxY >= 0)\n            this.setTransform(dx, dy);\n\n    }\n\n    playing = (e) => {\n        console.log(e);\n        if(this.props.muted)\n            this.mute(true);\n        this.props.onStarted(this.haveAudio);\n        this.resize();\n    }\n\n    paused = (e) => {\n        console.log(e);\n    }\n\n    time = (e) => {\n        // TODO: detect pauses\n        // console.log(e.target.currentTime);\n        this.props.onTime(e.target.currentTime);\n    }\n\n    componentDidMount() {\n        this.connectWebRTC().then(() => {\n            this.resize();\n        });\n        window.addEventListener('resize', (e) => {\n            this.resize();\n            console.log(e);\n        });\n\n        window.addEventListener('keydown', (e) => {\n            this.onKeyDown(e);\n        })\n    }\n\n    componentDidUpdate(prevProps) {\n        if(this.props.muted != prevProps.muted) {\n            this.mute(this.props.muted);\n        }\n    }\n\n    async connectWebRTC() {\n        if(!this.props.config.janus)\n            return;\n\n        let deps = Janus.useDefaultDependencies({adapter});\n        await new Promise(resolve => Janus.init({\n            debug: 'all',\n            dependencies: deps,\n            callback: resolve}));\n        console.log('Janus inited');\n\n        let showErrorAndReload = async (e) => {\n            console.log(e, this.haveAudio);\n            if(e.name == 'NotAllowedError' && this.haveAudio) {\n                this.haveAudio = false;\n            } else if(e == \"No capture device found\") {\n                return;\n            } else {\n                await this.props.onError(e);\n            }\n            janus.destroy();\n        }\n        \n        if(!Janus.isWebrtcSupported()) {\n            showErrorAndReload(\"No WebRTC support... \");\n        }\n\n        let janus, me=this;\n        await new Promise((resolve, reject) => { janus = new Janus({\n                server: me.props.config.janus,\n                success: resolve,\n                error: showErrorAndReload,\n                destroyed: () => this.connectWebRTC()\n            });\n        });\n        console.log('Janus connected');\n\n        let opaqueId = \"streamingtest-\"+Janus.randomString(12);\n        let streaming = await new Promise((resolve, reject) => {\n            janus.attach({\n                plugin: \"janus.plugin.streaming\",\n                opaqueId: opaqueId,\n                success: resolve,\n                error: showErrorAndReload,\n                onmessage: (msg, jsep) => {\n                    Janus.debug(\" ::: Got a message :::\");\n                    Janus.debug(msg);\n                    let result = msg.result;\n                    if(result && result.status) {\n                        if(result.status == 'started') {\n                            console.log('Streaming started!');\n                            \n                            // FIXME: update MicButton every time.\n                            \n                            if(me.video.current.played.length) {\n                                me.playing();\n                            }\t\t\t\t\t\t\t\n                        }\n                    } else if(msg.error) {\n                        showErrorAndReload(msg.error);\n                    }\n                    if(jsep) {\n                        Janus.debug(\"Handling SDP as well...\");\n                        Janus.debug(jsep);\n        \n                        streaming.createAnswer({\n                            jsep: jsep,\n                            media: { audioSend: this.haveAudio, videoSend: false },\n                            success: function(jsep) {\n                                Janus.debug(\"Got SDP!\");\n                                Janus.debug(jsep);\n                                streaming.send({\n                                    message: { request: 'start' }, \n                                    jsep: jsep\n                                });\n        // \t\t\t\t\t\t\t\t$('#watch').html(\"Stop\").removeAttr('disabled').click(stopStream);\n                            },\n                            error: showErrorAndReload,\n                        });\n                    }\n                },\n                onremotestream: (stream) => {\n                    Janus.debug(\" ::: Got a remote stream :::\");\n                    Janus.debug(stream);\n                    console.log('Janus remote stream received');\n                    let vid = me.video.current;\n                    Janus.attachMediaStream(vid, stream);\n                    vid.muted = false;\n                },\n                oncleanup: () => {\n                    Janus.log(\" ::: Got a cleanup notification :::\");\n                },\n                slowLink: (u,n) => {\n                    console.warn('slowlink', u, n);\n                }\n            })\n        });\n        this.streaming = streaming;\n        console.log('Janus plugin attached');\n                                    \n        let devices = await navigator.mediaDevices.enumerateDevices();\n        \n        if(this.haveAudio === undefined) {\n            for(let d of devices) {\n                if(d.kind == 'audioinput')\n                    this.haveAudio = true;\n            }\n            if(this.haveAudio === undefined)\n                this.haveAudio = false;\n        }\n\n        let result = await new Promise(resolve => streaming.send({\n            message: { request: \"list\" }, \n            success: resolve\n        }));\n\n        if(!result.list || result.list[0].id != STREAM_ID) {\n            throw \"Wrong stream received\";\n        }\n    // \t\t\t\t\t\t\t$('#myVideo')[0].onplaying =  () => toggleLoading(false);\n        streaming.send({\n            message: { request: 'watch', id: STREAM_ID }\n        });\n\n    }\n\n    resize = (e) => {\n        let w = document.documentElement.clientWidth*this.quality,\n            h = document.documentElement.clientHeight*this.quality,\n            W, H;\n        console.log(`${w}x${h}`);\n\n        // fit height, crop width\n        H = Math.round(h/DH/2)*DH*2; W = H*DW/DH;\n        let dh = Math.abs(h-H), dw = Math.abs(w-W);\n        console.log(`fit height: ${W}x${H} ${dw}x${dh} ${W/H}`)    \n        let dw1 = dw, dh1 = dh, W1 = W, H1 = H;\n\n        // fit width, crop height\n        W = Math.round(w/DW/2)*DW*2; H = W*DH/DW;    \n        dh = Math.abs(h-H); dw = Math.abs(w-W);\n        console.log(`fit width: ${W}x${H} ${dw}x${dh} ${W/H}`)\n        let dw2 = dw, dh2 = dh, W2 = W, H2 = H;\n\n        let fit;\n        switch(this.fitMode) {\n            case 'fit_width':\n                fit = {fit_width: true, fit_height: false};\n                W=W2; H=H2;\n            break;\n            case 'fit_height':\n                fit = {fit_width: false, fit_height: true};\n                W=W1; H=H1;\n            break;\n            case 'fit_both':\n                fit = {fit_width: true, fit_height: true};\n                if(w/h > DW/DH) {\n                    // fit height\n                    W = W1; H = H1;\n                } else {\n                    // fit width\n                    W = W2; H = H2;\n                }\n            break;\n            case 'fill':\n                if(w/h < DW/DH) {\n                    fit = {fit_width: false, fit_height: true};\n                    W=W1; H=H1;\n                } else {\n                    fit = {fit_width: true, fit_height: false};\n                    W=W2; H=H2;\n                }\n            break;\n        }\n\n        console.log(`best fit: ${W}x${H}`, fit);\n        if(W >= MAXW || H >= MAXH) {\n            W = MAXW; H = MAXH;\n        } else if(W <= MINW || H <= MINH) {\n            W = MINW; H = MINH;\n        }\n        let newW = W, newH = H;\n        \n        this.setState(fit, () => {\n            this.zoom(0.0);\n            if(this.resizeTm) {\n                clearTimeout(this.resizeTm);\n            }\n            this.resizeTm = setTimeout(() => {\n                this.props.onResize(newW, newH);\n                this.resizeTm = null;\n            }, RESIZE_TIMEOUT);\n        });\n    }\n\n    set(name, value) {\n        if(name == 'fit_mode') {\n            this.fitMode = value;\n        } else if(name == 'quality') {\n            this.quality = QUALITY[value];\n        } else {\n            console.error(`Unknown \"${name}\"`);\n            return;\n        }\n        this.resize();\n    }\n\n    setTransform(dx, dy, scale) {\n        let tr = `translateX( calc( ${dx}px - 50% ) )`;\n        if(this.state.fit_width)\n            tr += `translateY( calc( ${dy}px - 50% ) )`;\n        else\n            tr += `translateY(${dy}px)`\n        if(!scale)\n            scale = this.scale;\n        tr += ` scale(${scale})`;\n        this.setState({transform: tr})\n        this.tX = dx; this.tY = dy;\n    }\n\n    zoom(z) {\n        if(z == 0.0)\n            this.scale = 1.0;\n        else\n            this.scale += z;\n        this.setTransform(0, 0);\n    }\n\n    onKeyDown = (e) => {\n        console.log(e.code);\n        if(KEYS[e.code])\n            this.props.onCameraMove(KEYS[e.code])\n    }\n    \n    mute(b) {\n        if(!this.haveAudio)\n            return;\n        console.log('mute', b);\n        if(!this.streaming)\n            return;\n\n        if(b) {\n            this.streaming.muteAudio();\n        } else {\n            this.streaming.unmuteAudio();\n        }\n    }\n\n    /**\n     * @returns {string} width, height, bitrate\n     */\n    status() {\n        if(!this.streaming)\n            return '<no video>'\n        let b = parseInt(this.streaming.getBitrate()),\n            v = this.video.current, \n            w = v.videoWidth, \n            h = v.videoHeight;\n        if(Janus.webRTCAdapter.browserDetails.browser == 'safari')\n            b = Math.round(b / 1000);\n        return `${w}x${h} @ ${b} kb/s`;\n    }\n\n    render() {\n        return (\n        <video autoPlay muted playsInline loop \n            id=\"myVideo\"\n            className={`${this.state.fit_width? 'fit_width': ''} ${this.state.fit_height? 'fit_height': ''}`}\n            style={{transform: this.state.transform}}\n            ref={this.video}\n            onMouseDown={this.touchDown}\n            onMouseMove={this.touchMove}\n            onTouchStart={this.touchDown}\n            onTouchMove={this.touchMove}\n            onKeyDown={this.onKeyDown}\n            onPlaying={this.playing} onTimeUpdate={this.time} >\n            \n            {/* <source src=\"https://www.w3schools.com/howto/rain.mp4\" type=\"video/mp4\"></source> */}\n            Your browser does not support HTML5 video.\n        </video>)\n    }\n}\n","import './Dialog.css'\nimport React, { Component } from 'react';\nimport {Modal, Button} from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\n\n\nexport class RetryReload extends Component {\n    state = {\n        show: false, \n        message: {\n            header: '',\n            text: ''\n        }\n    };\n\n    async show(message) {\n        return new Promise((resolve) => {\n            this.setState({show: true, message: message}, () => {\n                this.onClose = resolve;\n            });\n        })\n    }\n\n    handleClose = (e) => {\n        let name = e && e.target.name;\n        this.setState({ show: false }, () => {\n            if(name && this.onClose)\n                this.onClose(name);\n        });\n    }\n\n    render() {\n        return (\n            <Modal show={this.state.show} onHide={this.handleClose}  dialogClassName=\"dialog-div\">\n                <Modal.Header closeButton>\n                    <FontAwesomeIcon icon={this.props.icon || faExclamationTriangle} className=\"dialog-icon\" />\n                    <Modal.Title>{this.state.message.header}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>{this.state.message.text}</Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={this.handleClose} name=\"retry\">\n                        Retry\n                    </Button>\n                    <Button variant=\"primary\" onClick={this.handleClose} name=\"reload\">\n                        Reload\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        );\n    }\n}\n","import './Status.css'\nimport React, { Component } from 'react';\n\nexport default class Status extends Component {\n    render() {\n        return (\n            <div id=\"statusDiv\">            \n                <span id=\"videoInfoSpan\">{this.props.info}</span>\n                <br />\n                <span id=\"videoExtraSpan\">{this.props.extra}</span>\n            </div>\n        );\n    }\n}\n","import './Spinner.css'\nimport React, { Component } from 'react';\n\n\nexport default class Spinner extends Component {\n\n    render() {\n        return (\n            <div className={`animationload ${this.props.hidden? 'animationload-after': ''}`} id=\"loadingAnim\">\n                <div className=\"osahanloading\"></div>\n                <h3 className=\"loadingMessage\">Loading</h3>\n            </div>\n        );\n    }\n}\n","import 'bootstrap/dist/css/bootstrap.css';\nimport './DriveWindow.css';\n\nimport React, { Component } from 'react';\nimport MicButton from './MicButton';\nimport FullscreenButton from './FullscreenButton';\nimport {PlusButton, MinusButton} from './ZoomButton';\nimport SettingsButton from './SettingsButton';\nimport {CameraJoystick, EngineJoystick} from './Joystick';\nimport Video from './Video';\nimport { RetryReload } from './Dialog';\nimport Status from './Status';\nimport Spinner from './Spinner';\n\n\nconst RECONNECT_TIMEOUT = 1000,\n        CAMERA_MOVE_STEP = 0.5;\n\nexport default class DriveWindow extends Component {\n    state = {\n        joystickConnected: false, \n        plusDisabled: true, \n        minusDisabled: true,\n        statusText: \"\",\n        loading: true,\n        muted: true,\n        haveSound: false\n    };\n    config = null;\n    reconnectTimeout = 0;\n\n    /** @type {WebSocket} */ ws = null;\n    /** @type {React.RefObject<Video>} */ video = React.createRef();\n    /** @type {React.RefObject<RetryReload>} */ modal = React.createRef();\n    /** @type {React.RefObject<PlusButton>} */ plus = React.createRef();\n    /** @type {React.RefObject<MinusButton>} */ minus = React.createRef();\n    /** @type {React.RefObject<Status>} */ status = React.createRef();\n    /** @type {React.RefObject<Spinner>} */ spinner = React.createRef();\n    \n    connectJoystick() {\n        if(!this.state.config.joystick) {\n            this.setState({joystickConnected: true});\n            return;\n        }\n        /** @type {WebSocket} */ let ws = null;\n        try {\n            console.log('connecting joystick...');\n            this.reconnectTimeout = 0;\n            if(this.state.config.joystick)\n                ws = new WebSocket(this.state.config.joystick);\n        } catch(e) {\n            console.log('connecting joystick: error', e);\n            if(!this.reconnectTimeout)\n                this.reconnectTimeout = setTimeout(() => this.connectJoystick(), RECONNECT_TIMEOUT);\n            else\n                console.log('timeout already started')\n            return;\n        }\n        if(!ws)\n            return;\n\n        ws.onopen = () => {\n            console.log('joystick connected!');\n            this.ws = ws;\n            this.ws.send(JSON.stringify({cmd: 'hello'}));\n            this.setState({joystickConnected: true});\n        }\n        ws.onmessage = (msg) => {\n            console.log(msg);\n        }\n        ws.onerror = (err) => {\n            // console.log(err);\n        }\n        ws.onclose = () => {\n            this.ws = null;\n            this.setState({joystickConnected: false});\n            console.log('joystick disconnected');\n            if(!this.reconnectTimeout) {\n                this.reconnectTimeout = setTimeout(() => this.connectJoystick(), RECONNECT_TIMEOUT);\n            } else\n                console.log('timeout already started')\n        }\n    }\n\n    constructor() {\n        super();\n        this.fetchConfig().then(() => this.connectJoystick());\n    }\n\n    sendCommand(cmd) {\n        if(this.ws) {\n            cmd.timestamp = Date.now();\n            this.ws.send(JSON.stringify(cmd));\n        }\n    }\n\n    onJoystickMove = (force, angle) => {\n        this.sendCommand({\n            cmd: 'move',\n            force,\n            angle\n        });\n    }\n\n    onJoystickMoveEnd = () => {\n        this.sendCommand({\n            cmd: 'end',\n            what: 'move'\n        });\n    }\n\n    onSettingsChanged = (name, value) => {\n        console.log(`${name} = ${value}`, this.video);\n        this.video.current.set(name, value);\n        // TODO: update Video element\n    }\n\n    onVideoError = async (e) => {\n        console.error(e);\n        let errorText = (e.name && e.message)? \n            <>\n                <p> {`Name: ${e.name}`} </p>\n                <p> {`Message: ${e.message}`} </p>\n            </> :\n            e;\n        let res = await this.modal.current.show(\n            {\n                header: 'Video Error', \n                text:   errorText\n            });\n        console.log(res);\n        if(res == 'reload')\n            window.location.reload();\n        else\n            this.setState({loading: true});\n    }\n\n    onVideoStarted = (haveSound) => {\n        console.log('VIDEO STARTED');\n        this.setState({loading: false, haveSound});\n        this.updateScaleButtons();\n        if(this.statusInterval)\n            return;\n        this.statusInterval = setInterval(() => {\n            this.setState({statusText: this.video.current.status()});\n        }, 1000);\n    }\n\n    onVideoTime = (t) => {\n        this.setState({statusExtra: t.toFixed(1)});\n    }\n\n    onVideoSize = (newW, newH) => {\n        this.sendCommand({\n            cmd: 'resolution', \n            width: newW, \n            height: newH\n        });\n        this.updateScaleButtons();\n    }\n\n    updateScaleButtons() {\n        this.setState({\n            minusDisabled: this.video.current.scale <= 1.0,\n            plusDisabled: false\n        });\n    }\n\n    onZoomIn = () => {\n        this.video.current.zoom(0.1);\n        this.updateScaleButtons();\n    }\n\n    onZoomOut = () => {\n        this.video.current.zoom(-0.1);\n        this.updateScaleButtons();\n    }\n\n    onCameraMove = (d) => {\n        console.log(d);\n        let plains = {\n            left: ['h', CAMERA_MOVE_STEP],\n            right: ['h', -CAMERA_MOVE_STEP],\n            down: ['v', CAMERA_MOVE_STEP],\n            up: ['v', -CAMERA_MOVE_STEP]\n        }\n        let [plain, step] = plains[d];\n        this.sendCommand({\n            cmd: 'look',\n            plain,\n            step\n        });\n    }\n\n    onCameraJoystickEnd = () => {\n        console.log('camera joystick: end');\n        this.sendCommand({\n            cmd: 'end',\n            what: 'look'\n        });\n    }\n\n    onCameraJoystickMove = (plain, step) => {\n        console.log(plain, step);\n        this.sendCommand({\n            cmd: 'look',\n            plain,\n            step\n        });\n    }\n    \n    onMute = (b) => {\n        this.setState({muted: !this.state.muted});\n    }\n\n    async fetchConfig () {\n        let response = await fetch(\"web-config.json\");\n        let data = await response.json();\n        let cfg = data;\n        console.log(cfg);\n        let config = cfg;\n        config.janus = cfg.janus && cfg.janus.replace(/{HOST}/g, document.location.host)\n        config.joystick = cfg.joystick && cfg.joystick.replace(/{HOST}/g, document.location.host)\n        this.setState({config});\n    }    \n\n    render() {\n        return (<>\n            <Spinner ref={this.spinner} hidden={!this.state.loading}/>\n            { this.state.config && <Video \n                                    ref={this.video} \n                                    config={this.state.config} \n                                    onStarted={this.onVideoStarted}\n                                    onError={this.onVideoError}\n                                    onResize={this.onVideoSize}\n                                    onCameraMove={this.onCameraMove}\n                                    onResize={this.onVideoSize}\n                                    onTime={this.onVideoTime}\n                                    muted={this.state.muted} /> }\n            {(!this.state.loading && this.state.haveSound) && <MicButton onMute={this.onMute} muted={this.state.muted}/> }\n            <FullscreenButton />\n            { this.state.joystickConnected && <EngineJoystick \n                                                onMove={this.onJoystickMove}\n                                                onEnd={this.onJoystickMoveEnd} /> }\n            { this.state.joystickConnected && <CameraJoystick \n                                                onEnd={this.onCameraJoystickEnd} \n                                                onMove={this.onCameraJoystickMove}/> }\n            <SettingsButton onChange={this.onSettingsChanged} />\n            <PlusButton  onClick={this.onZoomIn} ref={this.plus} disabled={this.state.plusDisabled}/>\n            <MinusButton onClick={this.onZoomOut} ref={this.minus} disabled={this.state.minusDisabled}/>\n            <RetryReload ref={this.modal}/>\n            <Status ref={this.status} info={this.state.statusText} extra={this.state.statusExtra}/>\n        </>)\n    }\n}\n","import 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\n\nimport React, { Component } from 'react';\nimport ConnectWizard from './ConnectWizard'\nimport DriveWindow from './DriveWindow'\n\n\nexport default class App extends Component {\n    state = {\n        showDrive: false\n    }\n\n    onDrive = () => {\n        this.setState({showDrive: true});\n    }\n\n    render() {\n        if(this.state.showDrive) {\n            document.getElementsByTagName('html')[0].classList.toggle('fullscreen-html', true);\n            document.getElementById('root').classList.toggle('fullscreen', true);            \n            document.body.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });\n            return <DriveWindow />;\n        } else {\n            return <ConnectWizard onDrive={this.onDrive} />\n        }\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\nimport ConnectWizard from './ConnectWizard'\nimport DriveWindow from './DriveWindow'\n\n\n// document.getElementsByTagName('html')[0].classList.toggle('fullscreen-html', false);\n// document.getElementById('root').classList.toggle('fullscreen', false);\n// ReactDOM.render(<ConnectWizard />, document.getElementById('root'));\n\n// document.getElementsByTagName('html')[0].classList.toggle('fullscreen-html', true);\n// document.getElementById('root').classList.toggle('fullscreen', true);\n// ReactDOM.render(<DriveWindow />, document.getElementById('root'));\n// document.body.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}